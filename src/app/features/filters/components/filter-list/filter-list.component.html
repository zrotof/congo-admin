<div class="filter-list">

  <!-- Header -->
  <div class="list-header">
    <div class="header-info">
      <h2>Gestion des Filtres Snapchat</h2>
      <p class="subtitle">Gérez les filtres Snapchat de la campagne</p>
    </div>
    <p-button label="Nouveau Filtre" icon="pi pi-plus" (onClick)="onAdd.emit()">
    </p-button>
  </div>

  <!-- Table -->
  <p-table [value]="filters" [loading]="loading" [paginator]="true" [rows]="10" [showCurrentPageReport]="true"
    currentPageReportTemplate="Affichage {first} à {last} sur {totalRecords} filtres"
    styleClass="p-datatable-striped p-datatable-gridlines">

    <!-- Header -->
    <ng-template pTemplate="header">
      <tr>

        <th style="width: 80px">Réseaux</th>
        <th style="width: 80px">Image</th>
        <th style="width: 180px">Nom</th>
        <th>Lien</th>
        <th style="width: 120px" class="text-center">Utilisations</th>
        <th style="width: 100px" class="text-center">Statut</th>
        <th style="width: 150px" class="text-center">Actions</th>
      </tr>
    </ng-template>

    <!-- Body -->
    <ng-template pTemplate="body" let-filter>


      <tr>
        <td>
          <div class="filter-platform">
            <span>{{ filter.platform }}</span>
          </div>
        </td>
        <!-- Image -->
        <td>
          <div class="filter-image">
            <img *ngIf="filter.imageUrl" [src]="filter.imageUrl" [alt]="filter.name || 'Filtre'" class="thumbnail" />
            <div *ngIf="!filter.imageUrl" class="no-image">
              <i class="pi pi-image"></i>
            </div>
          </div>
        </td>

        <!-- Nom -->
        <td>
          <div class="filter-name">
            <span>{{ filter.name || 'Sans nom' }}</span>
          </div>
        </td>

        <!-- Lien Snapchat -->
        <td>
          <div class="snapchat-link">
            <a [href]="filter.snapchatUrl" target="_blank" class="link-text" pTooltip="Ouvrir dans Snapchat">
              {{ filter.filterUrl | slice:0:40 }}...
            </a>
            <p-button icon="pi pi-external-link" [rounded]="true" [text]="true" size="small" pTooltip="Ouvrir"
              (onClick)="openSnapchatLink(filter.snapchatUrl)">
            </p-button>
          </div>
        </td>

        <!-- Utilisations -->
        <td class="text-center">
          <div class="usage-badge">
            <span>{{ filter.usageCount | number }}</span>
          </div>
        </td>

        <!-- Statut -->
        <td class="text-center">
          <p-tag [value]="filter.isActive ? 'Actif' : 'Inactif'" [severity]="getSeverity(filter.isActive)">
          </p-tag>
        </td>

        <!-- Actions -->
        <td>
          <div class="action-buttons">
            <p-button icon="pi pi-pencil" [rounded]="true" [text]="true" pTooltip="Modifier"
              (onClick)="onEdit.emit(filter)">
            </p-button>
            <p-button icon="pi pi-trash" [rounded]="true" [text]="true" severity="danger" pTooltip="Supprimer"
              (onClick)="onDelete.emit(filter.id)">
            </p-button>
          </div>
        </td>
      </tr>
    </ng-template>

    <!-- Empty Message -->
    <ng-template pTemplate="emptymessage">
      <tr>
        <td colspan="6" class="empty-state">
          <div class="empty-content">
            <i class="pi pi-camera"></i>
            <h3>Aucun filtre Snapchat</h3>
            <p>Commencez par créer votre premier filtre</p>
            <p-button label="Créer un filtre" icon="pi pi-plus" (onClick)="onAdd.emit()">
            </p-button>
          </div>
        </td>
      </tr>
    </ng-template>

  </p-table>

</div>