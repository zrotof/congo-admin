import{a as W,b as We,e as Ye,f as et,g as tt,h as it,i as nt,j as ot,m as rt,n as lt,o as at,p as st}from"./chunk-JHI2YREE.js";import{b as Ke,c as Xe}from"./chunk-ZAVYEOSM.js";import{b as je,c as ie,e as Le,f as Be,h as Ve,i as Re,j as Ue,k as ze,m as Ne,n as Ge,o as Ze,u as D,v as J}from"./chunk-IY4WSVLS.js";import{b as qe}from"./chunk-DUZYKJKU.js";import"./chunk-3POAWTZK.js";import{H as $e,S as ne,W as Qe,X as I,Y as V,aa as oe,da as He,ea as q,fa as G,ga as re,q as B}from"./chunk-PMVA72OO.js";import{g as Ee,i as k,k as we,l as ke,m as H,n as Ie,o as P,v as De,z as Ae}from"./chunk-K7HMDSOI.js";import{c as Je,d as le,f as Z,h as ae,i as se,k as ce}from"./chunk-F2X3VGZZ.js";import{$ as g,$b as Oe,Ab as he,Bb as be,Cb as y,Eb as x,Fb as T,Ha as ue,Hb as d,Ia as A,Ib as te,Jb as E,Ka as s,Lb as ve,Mb as ye,Nb as xe,Ob as $,P as R,Pa as j,Pb as Te,Q as me,Qb as Me,Sb as Se,Ua as O,V as S,Va as ge,Ya as Ce,Zb as w,_ as de,_a as m,_b as Q,aa as C,ac as Pe,bc as L,ca as fe,fb as a,ia as h,ib as U,ja as _e,jb as z,jc as b,kb as M,kc as Fe,na as F,ob as r,pb as l,qb as _,tb as N,ub as v,yb as u,zb as p}from"./chunk-KHOYMPRU.js";var gt=["header"],Ct=["footer"],ht=["rejecticon"],bt=["accepticon"],vt=["message"],yt=["icon"],xt=["headless"],Tt=[[["p-footer"]]],Mt=["p-footer"],St=(t,i,e)=>({$implicit:t,onAccept:i,onReject:e}),Ot=t=>({$implicit:t});function Pt(t,i){t&1&&N(0)}function Ft(t,i){if(t&1&&m(0,Pt,1,0,"ng-container",6),t&2){let e=p(2);a("ngTemplateOutlet",e.headlessTemplate||e._headlessTemplate)("ngTemplateOutletContext",Se(2,St,e.confirmation,e.onAccept.bind(e),e.onReject.bind(e)))}}function Et(t,i){t&1&&m(0,Ft,1,6,"ng-template",null,2,L)}function wt(t,i){t&1&&N(0)}function kt(t,i){if(t&1&&(r(0,"div",7),m(1,wt,1,0,"ng-container",8),l()),t&2){let e=p(3);a("ngClass",e.cx("header")),s(),a("ngTemplateOutlet",e.headerTemplate||e._headerTemplate)}}function It(t,i){t&1&&m(0,kt,2,2,"ng-template",null,4,L)}function Dt(t,i){}function At(t,i){t&1&&m(0,Dt,0,0,"ng-template")}function jt(t,i){if(t&1&&m(0,At,1,0,null,8),t&2){let e=p(3);a("ngTemplateOutlet",e.iconTemplate||e._iconTemplate)}}function Lt(t,i){if(t&1&&_(0,"i",7),t&2){let e=p(4);z(e.option("icon")),a("ngClass",e.cx("icon"))}}function Bt(t,i){if(t&1&&m(0,Lt,1,3,"i",11),t&2){let e=p(3);a("ngIf",e.option("icon"))}}function Vt(t,i){}function Rt(t,i){t&1&&m(0,Vt,0,0,"ng-template")}function Ut(t,i){if(t&1&&m(0,Rt,1,0,null,6),t&2){let e=p(3);a("ngTemplateOutlet",e.messageTemplate||e._messageTemplate)("ngTemplateOutletContext",Me(2,Ot,e.confirmation))}}function zt(t,i){if(t&1&&_(0,"span",10),t&2){let e=p(3);a("ngClass",e.cx("message"))("innerHTML",e.option("message"),ue)}}function Nt(t,i){if(t&1&&m(0,jt,1,1)(1,Bt,1,1,"i",9)(2,Ut,1,4)(3,zt,1,2,"span",10),t&2){let e=p(2);M(e.iconTemplate||e._iconTemplate?0:!e.iconTemplate&&!e._iconTemplate&&!e._messageTemplate&&!e.messageTemplate?1:-1),s(2),M(e.messageTemplate||e._messageTemplate?2:3)}}function $t(t,i){if(t&1&&m(0,It,2,0)(1,Nt,4,2,"ng-template",null,3,L),t&2){let e=p();M(e.headerTemplate||e._headerTemplate?0:-1)}}function Qt(t,i){t&1&&N(0)}function Ht(t,i){if(t&1&&(be(0),m(1,Qt,1,0,"ng-container",8)),t&2){let e=p(2);s(),a("ngTemplateOutlet",e.footerTemplate||e._footerTemplate)}}function qt(t,i){if(t&1&&_(0,"i"),t&2){let e=p(5);z(e.option("rejectIcon"))}}function Gt(t,i){if(t&1&&m(0,qt,1,2,"i",15),t&2){let e=p(4);a("ngIf",e.option("rejectIcon"))}}function Zt(t,i){}function Jt(t,i){t&1&&m(0,Zt,0,0,"ng-template")}function Wt(t,i){if(t&1){let e=v();r(0,"p-button",13),u("onClick",function(){g(e);let o=p(3);return C(o.onReject())}),m(1,Gt,1,1,"i",14)(2,Jt,1,0,null,8),l()}if(t&2){let e=p(3);a("label",e.rejectButtonLabel)("styleClass",e.getButtonStyleClass("pcRejectButton","rejectButtonStyleClass"))("ariaLabel",e.option("rejectButtonProps","ariaLabel"))("buttonProps",e.getRejectButtonProps()),s(),M(e.rejectIcon&&!e.rejectIconTemplate&&!e._rejectIconTemplate?1:-1),s(),a("ngTemplateOutlet",e.rejectIconTemplate||e._rejectIconTemplate)}}function Kt(t,i){if(t&1&&_(0,"i"),t&2){let e=p(5);z(e.option("acceptIcon"))}}function Xt(t,i){if(t&1&&m(0,Kt,1,2,"i",15),t&2){let e=p(4);a("ngIf",e.option("acceptIcon"))}}function Yt(t,i){}function ei(t,i){t&1&&m(0,Yt,0,0,"ng-template")}function ti(t,i){if(t&1){let e=v();r(0,"p-button",13),u("onClick",function(){g(e);let o=p(3);return C(o.onAccept())}),m(1,Xt,1,1,"i",14)(2,ei,1,0,null,8),l()}if(t&2){let e=p(3);a("label",e.acceptButtonLabel)("styleClass",e.getButtonStyleClass("pcAcceptButton","acceptButtonStyleClass"))("ariaLabel",e.option("acceptButtonProps","ariaLabel"))("buttonProps",e.getAcceptButtonProps()),s(),M(e.acceptIcon&&!e._acceptIconTemplate&&!e.acceptIconTemplate?1:-1),s(),a("ngTemplateOutlet",e.acceptIconTemplate||e._acceptIconTemplate)}}function ii(t,i){if(t&1&&m(0,Wt,3,6,"p-button",12)(1,ti,3,6,"p-button",12),t&2){let e=p(2);a("ngIf",e.option("rejectVisible")),s(),a("ngIf",e.option("acceptVisible"))}}function ni(t,i){if(t&1&&m(0,Ht,2,1)(1,ii,2,2),t&2){let e=p();M(e.footerTemplate||e._footerTemplate?0:-1),s(),M(!e.footerTemplate&&!e._footerTemplate?1:-1)}}var oi=({dt:t})=>`
.p-confirmdialog .p-dialog-content {
    display: flex;
    align-items: center;
    gap:  ${t("confirmdialog.content.gap")};
}

.p-confirmdialog .p-confirmdialog-icon {
    color: ${t("confirmdialog.icon.color")};
    font-size: ${t("confirmdialog.icon.size")};
    width: ${t("confirmdialog.icon.size")};
    height: ${t("confirmdialog.icon.size")};
}
`,ri={root:"p-confirmdialog",icon:"p-confirmdialog-icon",message:"p-confirmdialog-message",pcRejectButton:"p-confirmdialog-reject-button",pcAcceptButton:"p-confirmdialog-accept-button"},ct=(()=>{class t extends Qe{name="confirmdialog";theme=oi;classes=ri;static \u0275fac=(()=>{let e;return function(o){return(e||(e=fe(t)))(o||t)}})();static \u0275prov=R({token:t,factory:t.\u0275fac})}return t})();var li=se([Z({transform:"{{transform}}",opacity:0}),le("{{transition}}",Z({transform:"none",opacity:1}))]),ai=se([le("{{transition}}",Z({transform:"{{transform}}",opacity:0}))]),pe=(()=>{class t extends qe{confirmationService;zone;header;icon;message;get style(){return this._style}set style(e){this._style=e,this.cd.markForCheck()}styleClass;maskStyleClass;acceptIcon;acceptLabel;closeAriaLabel;acceptAriaLabel;acceptVisible=!0;rejectIcon;rejectLabel;rejectAriaLabel;rejectVisible=!0;acceptButtonStyleClass;rejectButtonStyleClass;closeOnEscape=!0;dismissableMask;blockScroll=!0;rtl=!1;closable=!0;appendTo="body";key;autoZIndex=!0;baseZIndex=0;transitionOptions="150ms cubic-bezier(0, 0, 0.2, 1)";focusTrap=!0;defaultFocus="accept";breakpoints;get visible(){return this._visible}set visible(e){this._visible=e,this._visible&&!this.maskVisible&&(this.maskVisible=!0),this.cd.markForCheck()}get position(){return this._position}set position(e){switch(this._position=e,e){case"topleft":case"bottomleft":case"left":this.transformOptions="translate3d(-100%, 0px, 0px)";break;case"topright":case"bottomright":case"right":this.transformOptions="translate3d(100%, 0px, 0px)";break;case"bottom":this.transformOptions="translate3d(0px, 100%, 0px)";break;case"top":this.transformOptions="translate3d(0px, -100%, 0px)";break;default:this.transformOptions="scale(0.7)";break}}draggable=!0;onHide=new h;footer;_componentStyle=S(ct);headerTemplate;footerTemplate;rejectIconTemplate;acceptIconTemplate;messageTemplate;iconTemplate;headlessTemplate;templates;_headerTemplate;_footerTemplate;_rejectIconTemplate;_acceptIconTemplate;_messageTemplate;_iconTemplate;_headlessTemplate;confirmation;_visible;_style;maskVisible;dialog;wrapper;contentContainer;subscription;preWidth;_position="center";transformOptions="scale(0.7)";styleElement;id=ne("pn_id_");ariaLabelledBy=this.getAriaLabelledBy();translationSubscription;get containerClass(){return this.cx("root")+" "+this.styleClass||" "}constructor(e,n){super(),this.confirmationService=e,this.zone=n,this.subscription=this.confirmationService.requireConfirmation$.subscribe(o=>{if(!o){this.hide();return}o.key===this.key&&(this.confirmation=o,Object.keys(o).forEach(f=>{this[f]=o[f]}),this.confirmation.accept&&(this.confirmation.acceptEvent=new h,this.confirmation.acceptEvent.subscribe(this.confirmation.accept)),this.confirmation.reject&&(this.confirmation.rejectEvent=new h,this.confirmation.rejectEvent.subscribe(this.confirmation.reject)),this.visible=!0)})}ngOnInit(){super.ngOnInit(),this.breakpoints&&this.createStyle(),this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.visible&&this.cd.markForCheck()})}ngAfterContentInit(){this.templates?.forEach(e=>{switch(e.getType()){case"header":this._headerTemplate=e.template;break;case"footer":this._footerTemplate=e.template;break;case"message":this._messageTemplate=e.template;break;case"icon":this._iconTemplate=e.template;break;case"rejecticon":this._rejectIconTemplate=e.template;break;case"accepticon":this._acceptIconTemplate=e.template;break;case"headless":this._headlessTemplate=e.template;break}})}getAriaLabelledBy(){return this.header!==null?ne("pn_id_")+"_header":null}option(e,n){let o=this;if(o.hasOwnProperty(e))return n?o[n]:o[e]}getButtonStyleClass(e,n){let o=this.cx(e),c=this.option(n);return[o,c].filter(Boolean).join(" ")}getElementToFocus(){switch(this.option("defaultFocus")){case"accept":return B(this.dialog.el.nativeElement,".p-confirm-dialog-accept");case"reject":return B(this.dialog.el.nativeElement,".p-confirm-dialog-reject");case"close":return B(this.dialog.el.nativeElement,".p-dialog-header-close");case"none":return null;default:return B(this.dialog.el.nativeElement,".p-confirm-dialog-accept")}}createStyle(){if(!this.styleElement){this.styleElement=this.document.createElement("style"),this.styleElement.type="text/css",this.document.head.appendChild(this.styleElement);let e="";for(let n in this.breakpoints)e+=`
                    @media screen and (max-width: ${n}) {
                        .p-dialog[${this.id}] {
                            width: ${this.breakpoints[n]} !important;
                        }
                    }
                `;this.styleElement.innerHTML=e,$e(this.styleElement,"nonce",this.config?.csp()?.nonce)}}close(){this.confirmation?.rejectEvent&&this.confirmation.rejectEvent.emit(I.CANCEL),this.hide(I.CANCEL)}hide(e){this.onHide.emit(e),this.visible=!1,this.unsubscribeConfirmationEvents(),this.confirmation=null}destroyStyle(){this.styleElement&&(this.document.head.removeChild(this.styleElement),this.styleElement=null)}ngOnDestroy(){this.subscription.unsubscribe(),this.unsubscribeConfirmationEvents(),this.translationSubscription&&this.translationSubscription.unsubscribe(),this.destroyStyle(),super.ngOnDestroy()}onVisibleChange(e){e?this.visible=e:this.close()}onAccept(){this.confirmation&&this.confirmation.acceptEvent&&this.confirmation.acceptEvent.emit(),this.hide(I.ACCEPT)}onReject(){this.confirmation&&this.confirmation.rejectEvent&&this.confirmation.rejectEvent.emit(I.REJECT),this.hide(I.REJECT)}unsubscribeConfirmationEvents(){this.confirmation&&(this.confirmation.acceptEvent?.unsubscribe(),this.confirmation.rejectEvent?.unsubscribe())}get acceptButtonLabel(){return this.option("acceptLabel")||this.config.getTranslation(re.ACCEPT)}get rejectButtonLabel(){return this.option("rejectLabel")||this.config.getTranslation(re.REJECT)}getAcceptButtonProps(){return this.option("acceptButtonProps")}getRejectButtonProps(){return this.option("rejectButtonProps")}static \u0275fac=function(n){return new(n||t)(j(V),j(_e))};static \u0275cmp=O({type:t,selectors:[["p-confirmDialog"],["p-confirmdialog"],["p-confirm-dialog"]],contentQueries:function(n,o,c){if(n&1&&(y(c,He,5),y(c,gt,4),y(c,Ct,4),y(c,ht,4),y(c,bt,4),y(c,vt,4),y(c,yt,4),y(c,xt,4),y(c,q,4)),n&2){let f;x(f=T())&&(o.footer=f.first),x(f=T())&&(o.headerTemplate=f.first),x(f=T())&&(o.footerTemplate=f.first),x(f=T())&&(o.rejectIconTemplate=f.first),x(f=T())&&(o.acceptIconTemplate=f.first),x(f=T())&&(o.messageTemplate=f.first),x(f=T())&&(o.iconTemplate=f.first),x(f=T())&&(o.headlessTemplate=f.first),x(f=T())&&(o.templates=f)}},inputs:{header:"header",icon:"icon",message:"message",style:"style",styleClass:"styleClass",maskStyleClass:"maskStyleClass",acceptIcon:"acceptIcon",acceptLabel:"acceptLabel",closeAriaLabel:"closeAriaLabel",acceptAriaLabel:"acceptAriaLabel",acceptVisible:[2,"acceptVisible","acceptVisible",b],rejectIcon:"rejectIcon",rejectLabel:"rejectLabel",rejectAriaLabel:"rejectAriaLabel",rejectVisible:[2,"rejectVisible","rejectVisible",b],acceptButtonStyleClass:"acceptButtonStyleClass",rejectButtonStyleClass:"rejectButtonStyleClass",closeOnEscape:[2,"closeOnEscape","closeOnEscape",b],dismissableMask:[2,"dismissableMask","dismissableMask",b],blockScroll:[2,"blockScroll","blockScroll",b],rtl:[2,"rtl","rtl",b],closable:[2,"closable","closable",b],appendTo:"appendTo",key:"key",autoZIndex:[2,"autoZIndex","autoZIndex",b],baseZIndex:[2,"baseZIndex","baseZIndex",Fe],transitionOptions:"transitionOptions",focusTrap:[2,"focusTrap","focusTrap",b],defaultFocus:"defaultFocus",breakpoints:"breakpoints",visible:"visible",position:"position",draggable:[2,"draggable","draggable",b]},outputs:{onHide:"onHide"},features:[$([ct]),Ce],ngContentSelectors:Mt,decls:6,vars:14,consts:[["dialog",""],["footer",""],["headless",""],["content",""],["header",""],["role","alertdialog",3,"visibleChange","visible","closable","styleClass","modal","header","closeOnEscape","blockScroll","appendTo","position","dismissableMask","draggable"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngClass"],[4,"ngTemplateOutlet"],[3,"ngClass","class"],[3,"ngClass","innerHTML"],[3,"ngClass","class",4,"ngIf"],[3,"label","styleClass","ariaLabel","buttonProps","onClick",4,"ngIf"],[3,"onClick","label","styleClass","ariaLabel","buttonProps"],[3,"class"],[3,"class",4,"ngIf"]],template:function(n,o){if(n&1){let c=v();he(Tt),r(0,"p-dialog",5,0),u("visibleChange",function(_t){return g(c),C(o.onVisibleChange(_t))}),m(2,Et,2,0)(3,$t,3,1)(4,ni,2,2,"ng-template",null,1,L),l()}n&2&&(U(o.style),a("visible",o.visible)("closable",o.option("closable"))("styleClass",o.containerClass)("modal",!0)("header",o.option("header"))("closeOnEscape",o.option("closeOnEscape"))("blockScroll",o.option("blockScroll"))("appendTo",o.option("appendTo"))("position",o.position)("dismissableMask",o.dismissableMask)("draggable",o.draggable),s(2),M(o.headlessTemplate||o._headlessTemplate?2:3))},dependencies:[P,Ee,k,we,D,W,G],encapsulation:2,data:{animation:[Je("animation",[ae("void => visible",[ce(li)]),ae("visible => void",[ce(ai)])])]},changeDetection:0})}return t})(),mt=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=ge({type:t});static \u0275inj=me({imports:[pe,G,G]})}return t})();var X=class t{http=S(De);API_URL=`${Ae.apiUrl}/snapfilters`;filters=F([]);getAllFilters(){return this.http.get(this.API_URL,{withCredentials:!0})}getFilterById(i){return this.http.get(`${this.API_URL}/${i}`,{withCredentials:!0})}createFilter(i){return this.http.post(this.API_URL,i,{withCredentials:!0})}updateFilter(i,e){return this.http.put(`${this.API_URL}/${i}`,e,{withCredentials:!0})}deleteFilter(i){return this.http.delete(`${this.API_URL}/${i}`,{withCredentials:!0})}static \u0275fac=function(e){return new(e||t)};static \u0275prov=R({token:t,factory:t.\u0275fac,providedIn:"root"})};function pi(t,i){t&1&&(r(0,"tr")(1,"th",9),d(2,"Image"),l(),r(3,"th",10),d(4,"Nom"),l(),r(5,"th"),d(6,"Lien Snapchat"),l(),r(7,"th",11),d(8,"Utilisations"),l(),r(9,"th",12),d(10,"Statut"),l(),r(11,"th",13),d(12,"Actions"),l()())}function mi(t,i){if(t&1&&_(0,"img",29),t&2){let e=p().$implicit;a("src",e.imageUrl,A)("alt",e.name||"Filtre")}}function di(t,i){t&1&&(r(0,"div",30),_(1,"i",31),l())}function fi(t,i){if(t&1){let e=v();r(0,"tr")(1,"td")(2,"div",14),m(3,mi,1,2,"img",15)(4,di,2,0,"div",16),l()(),r(5,"td")(6,"div",17)(7,"span"),d(8),l()()(),r(9,"td")(10,"div",18)(11,"a",19),d(12),w(13,"slice"),l(),r(14,"p-button",20),u("onClick",function(){let o=g(e).$implicit,c=p();return C(c.openSnapchatLink(o.snapchatUrl))}),l()()(),r(15,"td",21)(16,"div",22),_(17,"i",23),r(18,"span"),d(19),w(20,"number"),l()()(),r(21,"td",21),_(22,"p-tag",24),l(),r(23,"td")(24,"div",25)(25,"p-button",26),u("onClick",function(){let o=g(e).$implicit,c=p();return C(c.onEdit.emit(o))}),l(),r(26,"p-button",27),u("onClick",function(){let o=g(e).$implicit,c=p();return C(c.toggleActive(o))}),l(),r(27,"p-button",28),u("onClick",function(){let o=g(e).$implicit,c=p();return C(c.onDelete.emit(o.id))}),l()()()()}if(t&2){let e=i.$implicit,n=p();s(3),a("ngIf",e.imageUrl),s(),a("ngIf",!e.imageUrl),s(4),te(e.name||"Sans nom"),s(3),a("href",e.snapchatUrl,A),s(),E(" ",Pe(13,19,e.snapchatUrl,0,40),"... "),s(2),a("rounded",!0)("text",!0),s(5),te(Q(20,23,e.usageCount)),s(3),a("value",e.isActive?"Actif":"Inactif")("severity",n.getSeverity(e.isActive)),s(3),a("rounded",!0)("text",!0),s(),a("icon",e.isActive?"pi pi-eye-slash":"pi pi-eye")("rounded",!0)("text",!0)("severity",e.isActive?"warn":"success")("pTooltip",e.isActive?"D\xE9sactiver":"Activer"),s(),a("rounded",!0)("text",!0)}}function _i(t,i){if(t&1){let e=v();r(0,"tr")(1,"td",32)(2,"div",33),_(3,"i",34),r(4,"h3"),d(5,"Aucun filtre Snapchat"),l(),r(6,"p"),d(7,"Commencez par cr\xE9er votre premier filtre"),l(),r(8,"p-button",35),u("onClick",function(){g(e);let o=p();return C(o.onAdd.emit())}),l()()()()}}var Y=class t{filters=[];loading=!1;onAdd=new h;onEdit=new h;onDelete=new h;onToggleActive=new h;getSeverity(i){return i?"success":"danger"}openSnapchatLink(i){window.open(i,"_blank")}toggleActive(i){this.onToggleActive.emit(i)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=O({type:t,selectors:[["app-filter-list"]],inputs:{filters:"filters",loading:"loading"},outputs:{onAdd:"onAdd",onEdit:"onEdit",onDelete:"onDelete",onToggleActive:"onToggleActive"},decls:12,vars:5,consts:[[1,"filter-list"],[1,"list-header"],[1,"header-info"],[1,"subtitle"],["label","Nouveau Filtre","icon","pi pi-plus",3,"onClick"],["currentPageReportTemplate","Affichage {first} \xE0 {last} sur {totalRecords} filtres","styleClass","p-datatable-striped p-datatable-gridlines",3,"value","loading","paginator","rows","showCurrentPageReport"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[2,"width","80px"],[2,"width","180px"],[1,"text-center",2,"width","120px"],[1,"text-center",2,"width","100px"],[1,"text-center",2,"width","150px"],[1,"filter-image"],["class","thumbnail",3,"src","alt",4,"ngIf"],["class","no-image",4,"ngIf"],[1,"filter-name"],[1,"snapchat-link"],["target","_blank","pTooltip","Ouvrir dans Snapchat",1,"link-text",3,"href"],["icon","pi pi-external-link","size","small","pTooltip","Ouvrir",3,"onClick","rounded","text"],[1,"text-center"],[1,"usage-badge"],[1,"pi","pi-users"],[3,"value","severity"],[1,"action-buttons"],["icon","pi pi-pencil","pTooltip","Modifier",3,"onClick","rounded","text"],[3,"onClick","icon","rounded","text","severity","pTooltip"],["icon","pi pi-trash","severity","danger","pTooltip","Supprimer",3,"onClick","rounded","text"],[1,"thumbnail",3,"src","alt"],[1,"no-image"],[1,"pi","pi-image"],["colspan","6",1,"empty-state"],[1,"empty-content"],[1,"pi","pi-camera"],["label","Cr\xE9er un filtre","icon","pi pi-plus",3,"onClick"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),d(4,"Gestion des Filtres Snapchat"),l(),r(5,"p",3),d(6,"G\xE9rez les filtres Snapchat de la campagne"),l()(),r(7,"p-button",4),u("onClick",function(){return n.onAdd.emit()}),l()(),r(8,"p-table",5),m(9,pi,13,0,"ng-template",6)(10,fi,28,25,"ng-template",7)(11,_i,9,0,"ng-template",8),l()()),e&2&&(s(8),a("value",n.filters)("loading",n.loading)("paginator",!0)("rows",10)("showCurrentPageReport",!0))},dependencies:[P,k,Ie,H,it,tt,q,J,D,ot,nt,et,Ye],styles:[".filter-list[_ngcontent-%COMP%]   .list-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:1.5rem;flex-wrap:wrap;gap:1rem}.filter-list[_ngcontent-%COMP%]   .list-header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 .25rem;font-size:1.5rem}.filter-list[_ngcontent-%COMP%]   .list-header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin:0;color:var(--text-color-secondary);font-size:.9rem}.filter-list[_ngcontent-%COMP%]   .filter-image[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]{width:50px;height:50px;object-fit:cover;border-radius:8px;border:2px solid var(--surface-border)}.filter-list[_ngcontent-%COMP%]   .filter-image[_ngcontent-%COMP%]   .no-image[_ngcontent-%COMP%]{width:50px;height:50px;display:flex;align-items:center;justify-content:center;background:var(--surface-100);border-radius:8px;border:2px dashed var(--surface-border)}.filter-list[_ngcontent-%COMP%]   .filter-image[_ngcontent-%COMP%]   .no-image[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem;color:var(--text-color-secondary)}.filter-list[_ngcontent-%COMP%]   .filter-name[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:500}.filter-list[_ngcontent-%COMP%]   .snapchat-link[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.filter-list[_ngcontent-%COMP%]   .snapchat-link[_ngcontent-%COMP%]   .link-text[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none;font-size:.9rem;word-break:break-all}.filter-list[_ngcontent-%COMP%]   .snapchat-link[_ngcontent-%COMP%]   .link-text[_ngcontent-%COMP%]:hover{text-decoration:underline}.filter-list[_ngcontent-%COMP%]   .usage-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;background:var(--surface-100);padding:.35rem .75rem;border-radius:20px;font-weight:600}.filter-list[_ngcontent-%COMP%]   .usage-badge[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.85rem;color:var(--primary-color)}.filter-list[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:.25rem}.filter-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{padding:3rem!important}.filter-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.5rem;text-align:center}.filter-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;color:var(--text-color-secondary);margin-bottom:.5rem}.filter-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.25rem}.filter-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 1rem;color:var(--text-color-secondary)}.filter-list[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%]{text-align:center}"]})};function ui(t,i){if(t&1){let e=v();r(0,"div",23),_(1,"img",24),r(2,"button",25),u("click",function(){g(e);let o=p();return C(o.removeImage())}),_(3,"i",26),l()()}if(t&2){let e=p();s(),a("src",e.imagePreview,A)}}function gi(t,i){if(t&1){let e=v();r(0,"div",27)(1,"p-fileUpload",28),u("onSelect",function(o){g(e);let c=p();return C(c.onFileSelect(o))}),l(),r(2,"p",29),d(3,"PNG, JPG ou GIF (max 5MB)"),l()()}t&2&&(s(),a("maxFileSize",5e6)("auto",!1))}function Ci(t,i){t&1&&(r(0,"small",30),d(1," Maximum 100 caract\xE8res "),l())}function hi(t,i){t&1&&(r(0,"small",30),d(1," Le lien Snapchat est requis "),l())}function bi(t,i){if(t&1&&(r(0,"div",31),_(1,"i",32),r(2,"div",33)(3,"p")(4,"strong"),d(5,"Utilisations :"),l(),d(6),w(7,"number"),l(),r(8,"p")(9,"strong"),d(10,"Cr\xE9\xE9 le :"),l(),d(11),w(12,"date"),l()()()),t&2){let e=p();s(6),E(" ",Q(7,2,e.filter.usageCount)," fois"),s(5),E(" ",Oe(12,4,e.filter.createdAt,"dd/MM/yyyy \xE0 HH:mm"),"")}}var ee=class t{constructor(i){this.fb=i;this.filterForm=this.fb.group({name:["",[ie.maxLength(100)]],snapchatUrl:["",[ie.required]],isActive:[!1]})}filter=null;onSave=new h;onCancel=new h;filterForm;isEditMode=!1;imagePreview=null;selectedFile=null;ngOnChanges(i){i.filter&&(this.filter?(this.isEditMode=!0,this.filterForm.patchValue({name:this.filter.name||"",snapchatUrl:this.filter.snapchatUrl,isActive:this.filter.isActive}),this.imagePreview=this.filter.imageUrl,this.selectedFile=null):(this.isEditMode=!1,this.filterForm.reset({name:"",snapchatUrl:"",isActive:!0}),this.imagePreview=null,this.selectedFile=null))}onFileSelect(i){let e=i.files[0];if(e){this.selectedFile=e;let n=new FileReader;n.onload=()=>{this.imagePreview=n.result},n.readAsDataURL(e)}}removeImage(){this.selectedFile=null,this.imagePreview=this.isEditMode&&this.filter?.imageUrl||null}submit(){if(this.filterForm.valid){let i=new FormData,e=this.filterForm.value;e.name&&i.append("name",e.name),i.append("snapchatUrl",e.snapchatUrl),i.append("isActive",e.isActive.toString()),this.selectedFile&&i.append("image",this.selectedFile),this.onSave.emit(i)}else Object.keys(this.filterForm.controls).forEach(i=>{this.filterForm.get(i)?.markAsTouched()})}get nameControl(){return this.filterForm.get("name")}get snapchatUrlControl(){return this.filterForm.get("snapchatUrl")}static \u0275fac=function(e){return new(e||t)(j(ze))};static \u0275cmp=O({type:t,selectors:[["app-filter-form"]],inputs:{filter:"filter"},outputs:{onSave:"onSave",onCancel:"onCancel"},features:[de],decls:38,vars:10,consts:[[1,"filter-form",3,"ngSubmit","formGroup"],[1,"field"],[1,"image-upload-area"],["class","image-preview",4,"ngIf"],["class","upload-zone",4,"ngIf"],[1,"hint"],["for","name"],["pInputText","","id","name","formControlName","name","placeholder","Ex: Filtre Campagne 2024",1,"w-full"],["class","p-error",4,"ngIf"],["for","snapchatUrl"],[1,"p-inputgroup"],[1,"p-inputgroup-addon"],[1,"pi","pi-link"],["pInputText","","id","snapchatUrl","formControlName","snapchatUrl","placeholder","https://snapchat.com/unlock/?type=...",1,"w-full"],[1,"switch-field"],["formControlName","isActive","inputId","isActive"],["for","isActive"],[1,"switch-label"],[1,"switch-hint"],["class","info-box",4,"ngIf"],[1,"form-actions"],["label","Annuler","severity","secondary","icon","pi pi-times",3,"onClick"],["type","submit",3,"label","icon","disabled"],[1,"image-preview"],["alt","Aper\xE7u",3,"src"],["type","button","pTooltip","Supprimer",1,"remove-btn",3,"click"],[1,"pi","pi-times"],[1,"upload-zone"],["mode","basic","name","image","accept","image/*","chooseLabel","Choisir une image","chooseIcon","pi pi-image",3,"onSelect","maxFileSize","auto"],[1,"upload-hint"],[1,"p-error"],[1,"info-box"],[1,"pi","pi-info-circle"],[1,"info-content"]],template:function(e,n){if(e&1&&(r(0,"form",0),u("ngSubmit",function(){return n.submit()}),r(1,"div",1)(2,"label"),d(3,"Image du filtre"),l(),r(4,"div",2),m(5,ui,4,1,"div",3)(6,gi,4,2,"div",4),l(),r(7,"small",5),d(8,"Image de pr\xE9visualisation affich\xE9e sur le site public"),l()(),r(9,"div",1)(10,"label",6),d(11,"Nom du filtre"),l(),_(12,"input",7),r(13,"small",5),d(14,"Optionnel - Pour identifier facilement le filtre"),l(),m(15,Ci,2,0,"small",8),l(),r(16,"div",1)(17,"label",9),d(18,"Lien Snapchat *"),l(),r(19,"div",10)(20,"span",11),_(21,"i",12),l(),_(22,"input",13),l(),r(23,"small",5),d(24,"Lien de partage du filtre Snapchat"),l(),m(25,hi,2,0,"small",8),l(),r(26,"div",1)(27,"div",14),_(28,"p-toggleswitch",15),r(29,"label",16)(30,"span",17),d(31,"Filtre actif"),l(),r(32,"span",18),d(33),l()()()(),m(34,bi,13,7,"div",19),r(35,"div",20)(36,"p-button",21),u("onClick",function(){return n.onCancel.emit()}),l(),_(37,"p-button",22),l()()),e&2){let o;a("formGroup",n.filterForm),s(5),a("ngIf",n.imagePreview),s(),a("ngIf",!n.imagePreview),s(9),a("ngIf",(n.nameControl==null?null:n.nameControl.invalid)&&(n.nameControl==null?null:n.nameControl.touched)),s(10),a("ngIf",(n.snapchatUrlControl==null||n.snapchatUrlControl.errors==null?null:n.snapchatUrlControl.errors.required)&&(n.snapchatUrlControl==null?null:n.snapchatUrlControl.touched)),s(8),E(" ",(o=n.filterForm.get("isActive"))!=null&&o.value?"Visible sur le site public":"Masqu\xE9 du site public"," "),s(),a("ngIf",n.isEditMode&&n.filter),s(3),a("label",n.isEditMode?"Mettre \xE0 jour":"Cr\xE9er")("icon",n.isEditMode?"pi pi-check":"pi pi-plus")("disabled",n.filterForm.invalid)}},dependencies:[P,k,H,ke,Ne,Ve,je,Le,Be,Re,Ue,Ze,Ge,J,D,st,at,lt,rt],styles:[".filter-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.filter-form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.filter-form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:var(--text-color)}.filter-form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{color:var(--text-color-secondary);font-size:.85rem}.filter-form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   .p-error[_ngcontent-%COMP%]{font-size:.85rem}.filter-form[_ngcontent-%COMP%]   .image-upload-area[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]{position:relative;width:150px;height:150px;border-radius:12px;overflow:hidden;border:2px solid var(--surface-border)}.filter-form[_ngcontent-%COMP%]   .image-upload-area[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.filter-form[_ngcontent-%COMP%]   .image-upload-area[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]{position:absolute;top:.5rem;right:.5rem;width:28px;height:28px;border-radius:50%;border:none;background:#0009;color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:background .2s}.filter-form[_ngcontent-%COMP%]   .image-upload-area[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]:hover{background:#dc3545e6}.filter-form[_ngcontent-%COMP%]   .image-upload-area[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.85rem}.filter-form[_ngcontent-%COMP%]   .image-upload-area[_ngcontent-%COMP%]   .upload-zone[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;gap:.5rem}.filter-form[_ngcontent-%COMP%]   .image-upload-area[_ngcontent-%COMP%]   .upload-zone[_ngcontent-%COMP%]   .upload-hint[_ngcontent-%COMP%]{margin:0;font-size:.8rem;color:var(--text-color-secondary)}.filter-form[_ngcontent-%COMP%]   .switch-field[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.75rem}.filter-form[_ngcontent-%COMP%]   .switch-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem;cursor:pointer}.filter-form[_ngcontent-%COMP%]   .switch-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .switch-label[_ngcontent-%COMP%]{font-weight:600}.filter-form[_ngcontent-%COMP%]   .switch-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .switch-hint[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-color-secondary)}.filter-form[_ngcontent-%COMP%]   .info-box[_ngcontent-%COMP%]{display:flex;gap:.75rem;padding:1rem;background:var(--surface-100);border-radius:8px;border-left:4px solid var(--primary-color)}.filter-form[_ngcontent-%COMP%]   .info-box[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{color:var(--primary-color);font-size:1.25rem}.filter-form[_ngcontent-%COMP%]   .info-box[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 .25rem;font-size:.9rem}.filter-form[_ngcontent-%COMP%]   .info-box[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{margin-bottom:0}.filter-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.75rem;padding-top:1rem;border-top:1px solid var(--surface-border)}.w-full[_ngcontent-%COMP%]{width:100%}"]})};var vi=()=>({width:"500px"}),ft=class t{filterService=S(X);messageService=S(oe);confirmationService=S(V);filters=F([]);isLoading=F(!1);displayDialog=!1;selectedFilter=F(null);isEditMode=F(!1);ngOnInit(){this.loadFilters()}loadFilters(){this.isLoading.set(!0),this.filterService.getAllFilters().subscribe({next:i=>{this.filters.set(i.data),this.isLoading.set(!1)},error:i=>{console.error("Erreur chargement filtres:",i),this.messageService.add({severity:"error",summary:"Erreur",detail:"Impossible de charger les filtres"}),this.isLoading.set(!1)}})}openCreateDialog(){this.isEditMode.set(!1),this.selectedFilter.set(null),this.displayDialog=!0}openEditDialog(i){this.isEditMode.set(!0),this.selectedFilter.set(i),this.displayDialog=!0}closeDialog(){this.displayDialog=!1,this.selectedFilter.set(null)}handleSave(i){this.isEditMode()&&this.selectedFilter()?this.filterService.updateFilter(this.selectedFilter().id,i).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Succ\xE8s",detail:"Filtre mis \xE0 jour"}),this.closeDialog(),this.loadFilters()},error:e=>{console.error("Erreur mise \xE0 jour:",e),this.messageService.add({severity:"error",summary:"Erreur",detail:"Impossible de mettre \xE0 jour le filtre"})}}):this.filterService.createFilter(i).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Succ\xE8s",detail:"Filtre cr\xE9\xE9"}),this.closeDialog(),this.loadFilters()},error:e=>{console.error("Erreur cr\xE9ation:",e),this.messageService.add({severity:"error",summary:"Erreur",detail:"Impossible de cr\xE9er le filtre"})}})}handleDelete(i){this.confirmationService.confirm({message:"Voulez-vous vraiment supprimer ce filtre ?",header:"Confirmation de suppression",icon:"pi pi-exclamation-triangle",acceptLabel:"Supprimer",rejectLabel:"Annuler",acceptButtonStyleClass:"p-button-danger",accept:()=>{this.filterService.deleteFilter(i).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Supprim\xE9",detail:"Filtre supprim\xE9 avec succ\xE8s"}),this.loadFilters()},error:e=>{console.error("Erreur suppression:",e),this.messageService.add({severity:"error",summary:"Erreur",detail:"Impossible de supprimer le filtre"})}})}})}handleToggleActive(i){let e=!i.isActive,n=new FormData;n.append("isActive",e.toString()),this.filterService.updateFilter(i.id,n).subscribe({next:()=>{this.messageService.add({severity:e?"success":"warn",summary:e?"Activ\xE9":"D\xE9sactiv\xE9",detail:`Le filtre a \xE9t\xE9 ${e?"activ\xE9":"d\xE9sactiv\xE9"}`}),this.loadFilters()},error:o=>{console.error("Erreur toggle:",o),this.messageService.add({severity:"error",summary:"Erreur",detail:"Impossible de modifier le statut"})}})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=O({type:t,selectors:[["app-filters"]],features:[$([oe,V])],decls:6,vars:11,consts:[[1,"filters-container"],[3,"onAdd","onEdit","onDelete","onToggleActive","filters","loading"],[3,"visibleChange","onHide","visible","header","modal","closable","draggable"],[3,"onSave","onCancel","filter"]],template:function(e,n){e&1&&(_(0,"p-toast")(1,"p-confirmDialog"),r(2,"div",0)(3,"app-filter-list",1),u("onAdd",function(){return n.openCreateDialog()})("onEdit",function(c){return n.openEditDialog(c)})("onDelete",function(c){return n.handleDelete(c)})("onToggleActive",function(c){return n.handleToggleActive(c)}),l(),r(4,"p-dialog",2),xe("visibleChange",function(c){return ye(n.displayDialog,c)||(n.displayDialog=c),c}),u("onHide",function(){return n.closeDialog()}),r(5,"app-filter-form",3),u("onSave",function(c){return n.handleSave(c)})("onCancel",function(){return n.closeDialog()}),l()()()),e&2&&(s(3),a("filters",n.filters())("loading",n.isLoading()),s(),U(Te(10,vi)),ve("visible",n.displayDialog),a("header",n.isEditMode()?"Modifier le filtre":"Nouveau filtre Snapchat")("modal",!0)("closable",!0)("draggable",!1),s(),a("filter",n.selectedFilter()))},dependencies:[P,We,W,Xe,Ke,mt,pe,Y,ee],styles:[".filters-container[_ngcontent-%COMP%]{padding:1.5rem;max-width:1400px;margin:0 auto}[_nghost-%COMP%]     .p-dialog .p-dialog-header{padding:1.25rem 1.5rem;border-bottom:1px solid var(--surface-border)}[_nghost-%COMP%]     .p-dialog .p-dialog-content{padding:1.5rem}"]})};export{ft as FiltersComponent};
