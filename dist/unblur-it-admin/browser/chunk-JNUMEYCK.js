import{a as Xe}from"./chunk-VSMBVDUH.js";import{a as ee,b as Ye,e as te,f as ie,g as it,h as nt,i as ot,j as rt,m as lt,n as at,o as st,p as ct}from"./chunk-UHFAESNB.js";import{b as et,c as tt}from"./chunk-ICCHB265.js";import{b as Be,c as G,e as Ve,f as Ne,h as Re,i as Ue,j as ze,k as Qe,m as He,n as We,o as Je,u as I,v as K}from"./chunk-HCSKCQK2.js";import"./chunk-LZQ2LGWE.js";import"./chunk-3POAWTZK.js";import{a as X,b as Y}from"./chunk-5DNG7CGK.js";import{$ as Ge,H as qe,R as re,S as $e,T as k,U as V,Y as le,aa as Z,ba as W,ca as ae,ea as Ze,q as B}from"./chunk-C6C26CRV.js";import{g as De,i as w,k as Ae,l as je,m as $,n as Le,o as P}from"./chunk-K7HMDSOI.js";import{c as Ke,d as se,f as J,h as ce,i as pe,k as me}from"./chunk-F2X3VGZZ.js";import{$ as _,$b as we,Ab as ye,Bb as Te,Cb as x,Eb as y,Fb as T,Ha as be,Hb as m,Ia as A,Ib as Q,Jb as E,Ka as s,Lb as Me,Mb as Oe,Nb as Pe,Ob as H,P as ue,Pa as j,Pb as Se,Q as ge,Qb as Ee,Sb as Fe,Ua as O,V as S,Va as ve,Ya as xe,Zb as F,_ as _e,_a as d,_b as q,aa as C,ac as ke,bc as L,ca as Ce,fb as a,ia as h,ib as R,ja as he,jb as U,jc as b,kb as M,kc as Ie,na as D,ob as r,pb as l,qb as u,tb as z,ub as v,yb as g,zb as p}from"./chunk-KHOYMPRU.js";var _t=["header"],Ct=["footer"],ht=["rejecticon"],bt=["accepticon"],vt=["message"],xt=["icon"],yt=["headless"],Tt=[[["p-footer"]]],Mt=["p-footer"],Ot=(t,n,e)=>({$implicit:t,onAccept:n,onReject:e}),Pt=t=>({$implicit:t});function St(t,n){t&1&&z(0)}function Et(t,n){if(t&1&&d(0,St,1,0,"ng-container",6),t&2){let e=p(2);a("ngTemplateOutlet",e.headlessTemplate||e._headlessTemplate)("ngTemplateOutletContext",Fe(2,Ot,e.confirmation,e.onAccept.bind(e),e.onReject.bind(e)))}}function Ft(t,n){t&1&&d(0,Et,1,6,"ng-template",null,2,L)}function wt(t,n){t&1&&z(0)}function kt(t,n){if(t&1&&(r(0,"div",7),d(1,wt,1,0,"ng-container",8),l()),t&2){let e=p(3);a("ngClass",e.cx("header")),s(),a("ngTemplateOutlet",e.headerTemplate||e._headerTemplate)}}function It(t,n){t&1&&d(0,kt,2,2,"ng-template",null,4,L)}function Dt(t,n){}function At(t,n){t&1&&d(0,Dt,0,0,"ng-template")}function jt(t,n){if(t&1&&d(0,At,1,0,null,8),t&2){let e=p(3);a("ngTemplateOutlet",e.iconTemplate||e._iconTemplate)}}function Lt(t,n){if(t&1&&u(0,"i",7),t&2){let e=p(4);U(e.option("icon")),a("ngClass",e.cx("icon"))}}function Bt(t,n){if(t&1&&d(0,Lt,1,3,"i",11),t&2){let e=p(3);a("ngIf",e.option("icon"))}}function Vt(t,n){}function Nt(t,n){t&1&&d(0,Vt,0,0,"ng-template")}function Rt(t,n){if(t&1&&d(0,Nt,1,0,null,6),t&2){let e=p(3);a("ngTemplateOutlet",e.messageTemplate||e._messageTemplate)("ngTemplateOutletContext",Ee(2,Pt,e.confirmation))}}function Ut(t,n){if(t&1&&u(0,"span",10),t&2){let e=p(3);a("ngClass",e.cx("message"))("innerHTML",e.option("message"),be)}}function zt(t,n){if(t&1&&d(0,jt,1,1)(1,Bt,1,1,"i",9)(2,Rt,1,4)(3,Ut,1,2,"span",10),t&2){let e=p(2);M(e.iconTemplate||e._iconTemplate?0:!e.iconTemplate&&!e._iconTemplate&&!e._messageTemplate&&!e.messageTemplate?1:-1),s(2),M(e.messageTemplate||e._messageTemplate?2:3)}}function Qt(t,n){if(t&1&&d(0,It,2,0)(1,zt,4,2,"ng-template",null,3,L),t&2){let e=p();M(e.headerTemplate||e._headerTemplate?0:-1)}}function Ht(t,n){t&1&&z(0)}function qt(t,n){if(t&1&&(Te(0),d(1,Ht,1,0,"ng-container",8)),t&2){let e=p(2);s(),a("ngTemplateOutlet",e.footerTemplate||e._footerTemplate)}}function $t(t,n){if(t&1&&u(0,"i"),t&2){let e=p(5);U(e.option("rejectIcon"))}}function Gt(t,n){if(t&1&&d(0,$t,1,2,"i",15),t&2){let e=p(4);a("ngIf",e.option("rejectIcon"))}}function Zt(t,n){}function Wt(t,n){t&1&&d(0,Zt,0,0,"ng-template")}function Jt(t,n){if(t&1){let e=v();r(0,"p-button",13),g("onClick",function(){_(e);let o=p(3);return C(o.onReject())}),d(1,Gt,1,1,"i",14)(2,Wt,1,0,null,8),l()}if(t&2){let e=p(3);a("label",e.rejectButtonLabel)("styleClass",e.getButtonStyleClass("pcRejectButton","rejectButtonStyleClass"))("ariaLabel",e.option("rejectButtonProps","ariaLabel"))("buttonProps",e.getRejectButtonProps()),s(),M(e.rejectIcon&&!e.rejectIconTemplate&&!e._rejectIconTemplate?1:-1),s(),a("ngTemplateOutlet",e.rejectIconTemplate||e._rejectIconTemplate)}}function Kt(t,n){if(t&1&&u(0,"i"),t&2){let e=p(5);U(e.option("acceptIcon"))}}function Xt(t,n){if(t&1&&d(0,Kt,1,2,"i",15),t&2){let e=p(4);a("ngIf",e.option("acceptIcon"))}}function Yt(t,n){}function ei(t,n){t&1&&d(0,Yt,0,0,"ng-template")}function ti(t,n){if(t&1){let e=v();r(0,"p-button",13),g("onClick",function(){_(e);let o=p(3);return C(o.onAccept())}),d(1,Xt,1,1,"i",14)(2,ei,1,0,null,8),l()}if(t&2){let e=p(3);a("label",e.acceptButtonLabel)("styleClass",e.getButtonStyleClass("pcAcceptButton","acceptButtonStyleClass"))("ariaLabel",e.option("acceptButtonProps","ariaLabel"))("buttonProps",e.getAcceptButtonProps()),s(),M(e.acceptIcon&&!e._acceptIconTemplate&&!e.acceptIconTemplate?1:-1),s(),a("ngTemplateOutlet",e.acceptIconTemplate||e._acceptIconTemplate)}}function ii(t,n){if(t&1&&d(0,Jt,3,6,"p-button",12)(1,ti,3,6,"p-button",12),t&2){let e=p(2);a("ngIf",e.option("rejectVisible")),s(),a("ngIf",e.option("acceptVisible"))}}function ni(t,n){if(t&1&&d(0,qt,2,1)(1,ii,2,2),t&2){let e=p();M(e.footerTemplate||e._footerTemplate?0:-1),s(),M(!e.footerTemplate&&!e._footerTemplate?1:-1)}}var oi=({dt:t})=>`
.p-confirmdialog .p-dialog-content {
    display: flex;
    align-items: center;
    gap:  ${t("confirmdialog.content.gap")};
}

.p-confirmdialog .p-confirmdialog-icon {
    color: ${t("confirmdialog.icon.color")};
    font-size: ${t("confirmdialog.icon.size")};
    width: ${t("confirmdialog.icon.size")};
    height: ${t("confirmdialog.icon.size")};
}
`,ri={root:"p-confirmdialog",icon:"p-confirmdialog-icon",message:"p-confirmdialog-message",pcRejectButton:"p-confirmdialog-reject-button",pcAcceptButton:"p-confirmdialog-accept-button"},pt=(()=>{class t extends $e{name="confirmdialog";theme=oi;classes=ri;static \u0275fac=(()=>{let e;return function(o){return(e||(e=Ce(t)))(o||t)}})();static \u0275prov=ue({token:t,factory:t.\u0275fac})}return t})();var li=pe([J({transform:"{{transform}}",opacity:0}),se("{{transition}}",J({transform:"none",opacity:1}))]),ai=pe([se("{{transition}}",J({transform:"{{transform}}",opacity:0}))]),fe=(()=>{class t extends Ze{confirmationService;zone;header;icon;message;get style(){return this._style}set style(e){this._style=e,this.cd.markForCheck()}styleClass;maskStyleClass;acceptIcon;acceptLabel;closeAriaLabel;acceptAriaLabel;acceptVisible=!0;rejectIcon;rejectLabel;rejectAriaLabel;rejectVisible=!0;acceptButtonStyleClass;rejectButtonStyleClass;closeOnEscape=!0;dismissableMask;blockScroll=!0;rtl=!1;closable=!0;appendTo="body";key;autoZIndex=!0;baseZIndex=0;transitionOptions="150ms cubic-bezier(0, 0, 0.2, 1)";focusTrap=!0;defaultFocus="accept";breakpoints;get visible(){return this._visible}set visible(e){this._visible=e,this._visible&&!this.maskVisible&&(this.maskVisible=!0),this.cd.markForCheck()}get position(){return this._position}set position(e){switch(this._position=e,e){case"topleft":case"bottomleft":case"left":this.transformOptions="translate3d(-100%, 0px, 0px)";break;case"topright":case"bottomright":case"right":this.transformOptions="translate3d(100%, 0px, 0px)";break;case"bottom":this.transformOptions="translate3d(0px, 100%, 0px)";break;case"top":this.transformOptions="translate3d(0px, -100%, 0px)";break;default:this.transformOptions="scale(0.7)";break}}draggable=!0;onHide=new h;footer;_componentStyle=S(pt);headerTemplate;footerTemplate;rejectIconTemplate;acceptIconTemplate;messageTemplate;iconTemplate;headlessTemplate;templates;_headerTemplate;_footerTemplate;_rejectIconTemplate;_acceptIconTemplate;_messageTemplate;_iconTemplate;_headlessTemplate;confirmation;_visible;_style;maskVisible;dialog;wrapper;contentContainer;subscription;preWidth;_position="center";transformOptions="scale(0.7)";styleElement;id=re("pn_id_");ariaLabelledBy=this.getAriaLabelledBy();translationSubscription;get containerClass(){return this.cx("root")+" "+this.styleClass||" "}constructor(e,i){super(),this.confirmationService=e,this.zone=i,this.subscription=this.confirmationService.requireConfirmation$.subscribe(o=>{if(!o){this.hide();return}o.key===this.key&&(this.confirmation=o,Object.keys(o).forEach(f=>{this[f]=o[f]}),this.confirmation.accept&&(this.confirmation.acceptEvent=new h,this.confirmation.acceptEvent.subscribe(this.confirmation.accept)),this.confirmation.reject&&(this.confirmation.rejectEvent=new h,this.confirmation.rejectEvent.subscribe(this.confirmation.reject)),this.visible=!0)})}ngOnInit(){super.ngOnInit(),this.breakpoints&&this.createStyle(),this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.visible&&this.cd.markForCheck()})}ngAfterContentInit(){this.templates?.forEach(e=>{switch(e.getType()){case"header":this._headerTemplate=e.template;break;case"footer":this._footerTemplate=e.template;break;case"message":this._messageTemplate=e.template;break;case"icon":this._iconTemplate=e.template;break;case"rejecticon":this._rejectIconTemplate=e.template;break;case"accepticon":this._acceptIconTemplate=e.template;break;case"headless":this._headlessTemplate=e.template;break}})}getAriaLabelledBy(){return this.header!==null?re("pn_id_")+"_header":null}option(e,i){let o=this;if(o.hasOwnProperty(e))return i?o[i]:o[e]}getButtonStyleClass(e,i){let o=this.cx(e),c=this.option(i);return[o,c].filter(Boolean).join(" ")}getElementToFocus(){switch(this.option("defaultFocus")){case"accept":return B(this.dialog.el.nativeElement,".p-confirm-dialog-accept");case"reject":return B(this.dialog.el.nativeElement,".p-confirm-dialog-reject");case"close":return B(this.dialog.el.nativeElement,".p-dialog-header-close");case"none":return null;default:return B(this.dialog.el.nativeElement,".p-confirm-dialog-accept")}}createStyle(){if(!this.styleElement){this.styleElement=this.document.createElement("style"),this.styleElement.type="text/css",this.document.head.appendChild(this.styleElement);let e="";for(let i in this.breakpoints)e+=`
                    @media screen and (max-width: ${i}) {
                        .p-dialog[${this.id}] {
                            width: ${this.breakpoints[i]} !important;
                        }
                    }
                `;this.styleElement.innerHTML=e,qe(this.styleElement,"nonce",this.config?.csp()?.nonce)}}close(){this.confirmation?.rejectEvent&&this.confirmation.rejectEvent.emit(k.CANCEL),this.hide(k.CANCEL)}hide(e){this.onHide.emit(e),this.visible=!1,this.unsubscribeConfirmationEvents(),this.confirmation=null}destroyStyle(){this.styleElement&&(this.document.head.removeChild(this.styleElement),this.styleElement=null)}ngOnDestroy(){this.subscription.unsubscribe(),this.unsubscribeConfirmationEvents(),this.translationSubscription&&this.translationSubscription.unsubscribe(),this.destroyStyle(),super.ngOnDestroy()}onVisibleChange(e){e?this.visible=e:this.close()}onAccept(){this.confirmation&&this.confirmation.acceptEvent&&this.confirmation.acceptEvent.emit(),this.hide(k.ACCEPT)}onReject(){this.confirmation&&this.confirmation.rejectEvent&&this.confirmation.rejectEvent.emit(k.REJECT),this.hide(k.REJECT)}unsubscribeConfirmationEvents(){this.confirmation&&(this.confirmation.acceptEvent?.unsubscribe(),this.confirmation.rejectEvent?.unsubscribe())}get acceptButtonLabel(){return this.option("acceptLabel")||this.config.getTranslation(ae.ACCEPT)}get rejectButtonLabel(){return this.option("rejectLabel")||this.config.getTranslation(ae.REJECT)}getAcceptButtonProps(){return this.option("acceptButtonProps")}getRejectButtonProps(){return this.option("rejectButtonProps")}static \u0275fac=function(i){return new(i||t)(j(V),j(he))};static \u0275cmp=O({type:t,selectors:[["p-confirmDialog"],["p-confirmdialog"],["p-confirm-dialog"]],contentQueries:function(i,o,c){if(i&1&&(x(c,Ge,5),x(c,_t,4),x(c,Ct,4),x(c,ht,4),x(c,bt,4),x(c,vt,4),x(c,xt,4),x(c,yt,4),x(c,Z,4)),i&2){let f;y(f=T())&&(o.footer=f.first),y(f=T())&&(o.headerTemplate=f.first),y(f=T())&&(o.footerTemplate=f.first),y(f=T())&&(o.rejectIconTemplate=f.first),y(f=T())&&(o.acceptIconTemplate=f.first),y(f=T())&&(o.messageTemplate=f.first),y(f=T())&&(o.iconTemplate=f.first),y(f=T())&&(o.headlessTemplate=f.first),y(f=T())&&(o.templates=f)}},inputs:{header:"header",icon:"icon",message:"message",style:"style",styleClass:"styleClass",maskStyleClass:"maskStyleClass",acceptIcon:"acceptIcon",acceptLabel:"acceptLabel",closeAriaLabel:"closeAriaLabel",acceptAriaLabel:"acceptAriaLabel",acceptVisible:[2,"acceptVisible","acceptVisible",b],rejectIcon:"rejectIcon",rejectLabel:"rejectLabel",rejectAriaLabel:"rejectAriaLabel",rejectVisible:[2,"rejectVisible","rejectVisible",b],acceptButtonStyleClass:"acceptButtonStyleClass",rejectButtonStyleClass:"rejectButtonStyleClass",closeOnEscape:[2,"closeOnEscape","closeOnEscape",b],dismissableMask:[2,"dismissableMask","dismissableMask",b],blockScroll:[2,"blockScroll","blockScroll",b],rtl:[2,"rtl","rtl",b],closable:[2,"closable","closable",b],appendTo:"appendTo",key:"key",autoZIndex:[2,"autoZIndex","autoZIndex",b],baseZIndex:[2,"baseZIndex","baseZIndex",Ie],transitionOptions:"transitionOptions",focusTrap:[2,"focusTrap","focusTrap",b],defaultFocus:"defaultFocus",breakpoints:"breakpoints",visible:"visible",position:"position",draggable:[2,"draggable","draggable",b]},outputs:{onHide:"onHide"},features:[H([pt]),xe],ngContentSelectors:Mt,decls:6,vars:14,consts:[["dialog",""],["footer",""],["headless",""],["content",""],["header",""],["role","alertdialog",3,"visibleChange","visible","closable","styleClass","modal","header","closeOnEscape","blockScroll","appendTo","position","dismissableMask","draggable"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngClass"],[4,"ngTemplateOutlet"],[3,"ngClass","class"],[3,"ngClass","innerHTML"],[3,"ngClass","class",4,"ngIf"],[3,"label","styleClass","ariaLabel","buttonProps","onClick",4,"ngIf"],[3,"onClick","label","styleClass","ariaLabel","buttonProps"],[3,"class"],[3,"class",4,"ngIf"]],template:function(i,o){if(i&1){let c=v();ye(Tt),r(0,"p-dialog",5,0),g("visibleChange",function(N){return _(c),C(o.onVisibleChange(N))}),d(2,Ft,2,0)(3,Qt,3,1)(4,ni,2,2,"ng-template",null,1,L),l()}i&2&&(R(o.style),a("visible",o.visible)("closable",o.option("closable"))("styleClass",o.containerClass)("modal",!0)("header",o.option("header"))("closeOnEscape",o.option("closeOnEscape"))("blockScroll",o.option("blockScroll"))("appendTo",o.option("appendTo"))("position",o.position)("dismissableMask",o.dismissableMask)("draggable",o.draggable),s(2),M(o.headlessTemplate||o._headlessTemplate?2:3))},dependencies:[P,De,w,Ae,I,ee,W],encapsulation:2,data:{animation:[Ke("animation",[ce("void => visible",[me(li)]),ce("visible => void",[me(ai)])])]},changeDetection:0})}return t})(),dt=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=ve({type:t});static \u0275inj=ge({imports:[fe,W,W]})}return t})();function di(t,n){t&1&&(r(0,"tr")(1,"th",9),m(2,"R\xE9seaux"),l(),r(3,"th",9),m(4,"Image"),l(),r(5,"th",10),m(6,"Nom"),l(),r(7,"th"),m(8,"Lien"),l(),r(9,"th",11),m(10,"Utilisations"),l(),r(11,"th",12),m(12,"Statut"),l(),r(13,"th",13),m(14,"Actions"),l()())}function fi(t,n){if(t&1&&u(0,"img",28),t&2){let e=p().$implicit;a("src",e.imageUrl,A)("alt",e.name||"Filtre")}}function ui(t,n){t&1&&(r(0,"div",29),u(1,"i",30),l())}function gi(t,n){if(t&1){let e=v();r(0,"tr")(1,"td")(2,"div",14)(3,"span"),m(4),l()()(),r(5,"td")(6,"div",15),d(7,fi,1,2,"img",16)(8,ui,2,0,"div",17),l()(),r(9,"td")(10,"div",18)(11,"span"),m(12),l()()(),r(13,"td")(14,"div",19)(15,"a",20),m(16),F(17,"slice"),l(),r(18,"p-button",21),g("onClick",function(){let o=_(e).$implicit,c=p();return C(c.openSnapchatLink(o.snapchatUrl))}),l()()(),r(19,"td",22)(20,"div",23)(21,"span"),m(22),F(23,"number"),l()()(),r(24,"td",22),u(25,"p-tag",24),l(),r(26,"td")(27,"div",25)(28,"p-button",26),g("onClick",function(){let o=_(e).$implicit,c=p();return C(c.onEdit.emit(o))}),l(),r(29,"p-button",27),g("onClick",function(){let o=_(e).$implicit,c=p();return C(c.onDelete.emit(o.id))}),l()()()()}if(t&2){let e=n.$implicit,i=p();s(4),Q(e.platform),s(3),a("ngIf",e.imageUrl),s(),a("ngIf",!e.imageUrl),s(4),Q(e.name||"Sans nom"),s(3),a("href",e.snapchatUrl,A),s(),E(" ",ke(17,15,e.filterUrl,0,40),"... "),s(2),a("rounded",!0)("text",!0),s(4),Q(q(23,19,e.usageCount)),s(3),a("value",e.isActive?"Actif":"Inactif")("severity",i.getSeverity(e.isActive)),s(3),a("rounded",!0)("text",!0),s(),a("rounded",!0)("text",!0)}}function _i(t,n){if(t&1){let e=v();r(0,"tr")(1,"td",31)(2,"div",32),u(3,"i",33),r(4,"h3"),m(5,"Aucun filtre Snapchat"),l(),r(6,"p"),m(7,"Commencez par cr\xE9er votre premier filtre"),l(),r(8,"p-button",34),g("onClick",function(){_(e);let o=p();return C(o.onAdd.emit())}),l()()()()}}var ne=class t{filters=[];loading=!1;onAdd=new h;onEdit=new h;onDelete=new h;onToggleActive=new h;getSeverity(n){return n?"success":"danger"}openSnapchatLink(n){window.open(n,"_blank")}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=O({type:t,selectors:[["app-filter-list"]],inputs:{filters:"filters",loading:"loading"},outputs:{onAdd:"onAdd",onEdit:"onEdit",onDelete:"onDelete",onToggleActive:"onToggleActive"},decls:12,vars:5,consts:[[1,"filter-list"],[1,"list-header"],[1,"header-info"],[1,"subtitle"],["label","Nouveau Filtre","icon","pi pi-plus",3,"onClick"],["currentPageReportTemplate","Affichage {first} \xE0 {last} sur {totalRecords} filtres","styleClass","p-datatable-striped p-datatable-gridlines",3,"value","loading","paginator","rows","showCurrentPageReport"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[2,"width","80px"],[2,"width","180px"],[1,"text-center",2,"width","120px"],[1,"text-center",2,"width","100px"],[1,"text-center",2,"width","150px"],[1,"filter-platform"],[1,"filter-image"],["class","thumbnail",3,"src","alt",4,"ngIf"],["class","no-image",4,"ngIf"],[1,"filter-name"],[1,"snapchat-link"],["target","_blank","pTooltip","Ouvrir dans Snapchat",1,"link-text",3,"href"],["icon","pi pi-external-link","size","small","pTooltip","Ouvrir",3,"onClick","rounded","text"],[1,"text-center"],[1,"usage-badge"],[3,"value","severity"],[1,"action-buttons"],["icon","pi pi-pencil","pTooltip","Modifier",3,"onClick","rounded","text"],["icon","pi pi-trash","severity","danger","pTooltip","Supprimer",3,"onClick","rounded","text"],[1,"thumbnail",3,"src","alt"],[1,"no-image"],[1,"pi","pi-image"],["colspan","6",1,"empty-state"],[1,"empty-content"],[1,"pi","pi-camera"],["label","Cr\xE9er un filtre","icon","pi pi-plus",3,"onClick"]],template:function(e,i){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),m(4,"Gestion des Filtres Snapchat"),l(),r(5,"p",3),m(6,"G\xE9rez les filtres Snapchat de la campagne"),l()(),r(7,"p-button",4),g("onClick",function(){return i.onAdd.emit()}),l()(),r(8,"p-table",5),d(9,di,15,0,"ng-template",6)(10,gi,30,21,"ng-template",7)(11,_i,9,0,"ng-template",8),l()()),e&2&&(s(8),a("value",i.filters)("loading",i.loading)("paginator",!0)("rows",10)("showCurrentPageReport",!0))},dependencies:[P,w,Le,$,rt,ot,Z,K,I,Y,X,ie,te],styles:[".filter-list[_ngcontent-%COMP%]   .list-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:1.5rem;flex-wrap:wrap;gap:1rem}.filter-list[_ngcontent-%COMP%]   .list-header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 .25rem;font-size:1.5rem}.filter-list[_ngcontent-%COMP%]   .list-header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin:0;color:var(--text-color-secondary);font-size:.9rem}.filter-list[_ngcontent-%COMP%]   .filter-image[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]{width:50px;height:50px;object-fit:cover;border-radius:8px;border:2px solid var(--surface-border)}.filter-list[_ngcontent-%COMP%]   .filter-image[_ngcontent-%COMP%]   .no-image[_ngcontent-%COMP%]{width:50px;height:50px;display:flex;align-items:center;justify-content:center;background:var(--surface-100);border-radius:8px;border:2px dashed var(--surface-border)}.filter-list[_ngcontent-%COMP%]   .filter-image[_ngcontent-%COMP%]   .no-image[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem;color:var(--text-color-secondary)}.filter-list[_ngcontent-%COMP%]   .filter-name[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:500}.filter-list[_ngcontent-%COMP%]   .snapchat-link[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.filter-list[_ngcontent-%COMP%]   .snapchat-link[_ngcontent-%COMP%]   .link-text[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none;font-size:.9rem;word-break:break-all}.filter-list[_ngcontent-%COMP%]   .snapchat-link[_ngcontent-%COMP%]   .link-text[_ngcontent-%COMP%]:hover{text-decoration:underline}.filter-list[_ngcontent-%COMP%]   .usage-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;background:var(--surface-100);padding:.35rem .75rem;border-radius:20px;font-weight:600}.filter-list[_ngcontent-%COMP%]   .usage-badge[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.85rem;color:var(--primary-color)}.filter-list[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:.25rem}.filter-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{padding:3rem!important}.filter-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.5rem;text-align:center}.filter-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;color:var(--text-color-secondary);margin-bottom:.5rem}.filter-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.25rem}.filter-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 1rem;color:var(--text-color-secondary)}.filter-list[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%]{text-align:center}"]})};function Ci(t,n){t&1&&(r(0,"small",28),m(1," L'URL est requise "),l())}function hi(t,n){t&1&&(r(0,"small",28),m(1," Maximum 100 caract\xE8res "),l())}function bi(t,n){if(t&1&&(r(0,"div",29),u(1,"i",30),r(2,"div",31)(3,"span")(4,"strong"),m(5,"Utilisations :"),l(),m(6),F(7,"number"),l(),r(8,"span")(9,"strong"),m(10,"Cr\xE9\xE9 le :"),l(),m(11),F(12,"date"),l()()()),t&2){let e=p();s(6),E(" ",q(7,2,e.filter.usageCount)," fois"),s(5),E(" ",we(12,4,e.filter.createdAt,"dd/MM/yyyy \xE0 HH:mm"),"")}}function vi(t,n){if(t&1){let e=v();r(0,"div",32),u(1,"img",33),r(2,"button",34),g("click",function(){_(e);let o=p();return C(o.removeImage())}),u(3,"i",35),l()()}if(t&2){let e=p();s(),a("src",e.imagePreview,A)}}function xi(t,n){if(t&1){let e=v();r(0,"div")(1,"p-fileUpload",36),g("onSelect",function(o){_(e);let c=p();return C(c.onFileSelect(o))}),l(),r(2,"small",37),m(3,"PNG, JPG, WEBP (max 5MB)"),l()()}t&2&&(s(),a("maxFileSize",5e6)("auto",!1))}var oe=class t{constructor(n){this.fb=n;this.filterForm=this.fb.group({name:["",[G.maxLength(100)]],filterUrl:["",[G.required]],platform:["SNAPCHAT",[G.required]],isActive:[!0]})}filter=null;onSave=new h;onCancel=new h;filterForm;isEditMode=!1;imagePreview=null;selectedFile=null;ngOnChanges(n){n.filter&&(this.filter?(this.isEditMode=!0,this.filterForm.patchValue({name:this.filter.name||"",filterUrl:this.filter.filterUrl,platform:this.filter.platform||"SNAPCHAT",isActive:this.filter.isActive}),this.imagePreview=this.filter.imageUrl,this.selectedFile=null):(this.isEditMode=!1,this.filterForm.reset({name:"",filterUrl:"",platform:"SNAPCHAT",isActive:!0}),this.imagePreview=null,this.selectedFile=null))}onFileSelect(n){let e=n.files[0];if(e){this.selectedFile=e;let i=new FileReader;i.onload=()=>{this.imagePreview=i.result},i.readAsDataURL(e)}}removeImage(){this.selectedFile=null,this.imagePreview=this.isEditMode&&this.filter?.imageUrl||null}submit(){if(this.filterForm.valid){let n=new FormData,e=this.filterForm.value;e.name&&n.append("name",e.name),n.append("filterUrl",e.filterUrl),n.append("platform",e.platform),n.append("isActive",e.isActive.toString()),this.selectedFile&&n.append("image",this.selectedFile),this.onSave.emit(n)}}get nameControl(){return this.filterForm.get("name")}get filterUrlControl(){return this.filterForm.get("filterUrl")}static \u0275fac=function(e){return new(e||t)(j(Qe))};static \u0275cmp=O({type:t,selectors:[["app-filter-form"]],inputs:{filter:"filter"},outputs:{onSave:"onSave",onCancel:"onCancel"},features:[_e],decls:42,vars:14,consts:[[1,"flex","flex-column","gap-4","py-3",3,"ngSubmit","formGroup"],[1,"flex","align-items-center","justify-content-between","p-3","border-1","surface-border","border-round","bg-gray-50"],[1,"flex","flex-column","gap-1"],["for","isActive",1,"font-bold","cursor-pointer"],[1,"text-500"],[1,"flex","flex-column","align-items-end","gap-2"],["formControlName","isActive","inputId","isActive"],[3,"severity","value"],[1,"flex","flex-column","gap-2"],["for","filterUrl",1,"font-bold"],[1,"p-inputgroup"],["pInputText","","id","filterUrl","formControlName","filterUrl",1,"w-full",3,"placeholder"],["class","p-error",4,"ngIf"],["for","name",1,"font-bold"],["pInputText","","id","name","formControlName","name","placeholder","Ex: Filtre Campagne 2026",1,"w-full"],[1,"font-bold"],[1,"flex","flex-wrap","gap-4"],[1,"flex","align-items-center","gap-2"],["name","platform","value","SNAPCHAT","formControlName","platform","inputId","platformSnap"],["for","platformSnap",1,"cursor-pointer","flex","align-items-center","gap-2"],["name","platform","value","TIKTOK","formControlName","platform","inputId","platformTikTok"],["for","platformTikTok",1,"cursor-pointer","flex","align-items-center","gap-2"],["class","flex align-items-start gap-3 p-3 bg-blue-50 text-blue-700 border-round border-1 border-blue-100",4,"ngIf"],["class","relative mb-2 text-center border-round overflow-hidden border-1 surface-border bg-gray-50 p-3",4,"ngIf"],[4,"ngIf"],[1,"flex","justify-content-end","gap-2","mt-4","pt-3","border-top-1","surface-border"],["label","Annuler","severity","secondary","icon","pi pi-times",3,"onClick","text"],["type","submit",3,"label","icon","disabled"],[1,"p-error"],[1,"flex","align-items-start","gap-3","p-3","bg-blue-50","text-blue-700","border-round","border-1","border-blue-100"],[1,"pi","pi-info-circle","text-xl","mt-1"],[1,"flex","flex-column","gap-1","text-sm"],[1,"relative","mb-2","text-center","border-round","overflow-hidden","border-1","surface-border","bg-gray-50","p-3"],["alt","Aper\xE7u",2,"max-height","200px","width","auto","object-fit","contain",3,"src"],["type","button","pTooltip","Supprimer l'image",1,"absolute","top-0","right-0","m-2","p-link","w-2rem","h-2rem","border-circle","bg-red-500","text-white","flex","align-items-center","justify-content-center","hover:bg-red-600","transition-colors","shadow-2",3,"click"],[1,"pi","pi-times"],["mode","basic","name","image","accept","image/*","chooseLabel","Choisir une image","chooseIcon","pi pi-image","styleClass","p-button-outlined w-full",3,"onSelect","maxFileSize","auto"],[1,"text-500","block","mt-1"]],template:function(e,i){if(e&1&&(r(0,"form",0),g("ngSubmit",function(){return i.submit()}),r(1,"div",1)(2,"div",2)(3,"label",3),m(4,"Statut du filtre"),l(),r(5,"small",4),m(6),l()(),r(7,"div",5),u(8,"p-toggleswitch",6)(9,"p-tag",7),l()(),r(10,"div",8)(11,"label",9),m(12,"Lien du filtre *"),l(),r(13,"div",10),u(14,"input",11),l(),d(15,Ci,2,0,"small",12),l(),r(16,"div",8)(17,"label",13),m(18,"Nom du filtre *"),l(),u(19,"input",14),d(20,hi,2,0,"small",12),l(),r(21,"div",8)(22,"label",15),m(23,"Plateforme *"),l(),r(24,"div",16)(25,"div",17),u(26,"p-radioButton",18),r(27,"label",19),m(28," Snapchat "),l()(),r(29,"div",17),u(30,"p-radioButton",20),r(31,"label",21),m(32," TikTok "),l()()()(),d(33,bi,13,7,"div",22),r(34,"div",8)(35,"label",15),m(36,"Image du filtre *"),l(),d(37,vi,4,1,"div",23)(38,xi,4,2,"div",24),l(),r(39,"div",25)(40,"p-button",26),g("onClick",function(){return i.onCancel.emit()}),l(),u(41,"p-button",27),l()()),e&2){let o,c,f,N;a("formGroup",i.filterForm),s(6),E(" ",(o=i.filterForm.get("isActive"))!=null&&o.value?"Visible sur le site public":"Masqu\xE9 du site public"," "),s(3),a("severity",(c=i.filterForm.get("isActive"))!=null&&c.value?"success":"danger")("value",(f=i.filterForm.get("isActive"))!=null&&f.value?"ACTIF":"INACTIF"),s(5),a("placeholder",((N=i.filterForm.get("platform"))==null?null:N.value)==="SNAPCHAT"?"https://snapchat.com/unlock/...":"https://vm.tiktok.com/..."),s(),a("ngIf",(i.filterUrlControl==null||i.filterUrlControl.errors==null?null:i.filterUrlControl.errors.required)&&(i.filterUrlControl==null?null:i.filterUrlControl.touched)),s(5),a("ngIf",(i.nameControl==null?null:i.nameControl.invalid)&&(i.nameControl==null?null:i.nameControl.touched)),s(13),a("ngIf",i.isEditMode&&i.filter),s(4),a("ngIf",i.imagePreview),s(),a("ngIf",!i.imagePreview),s(2),a("text",!0),s(),a("label",i.isEditMode?"Mettre \xE0 jour":"Cr\xE9er")("icon",i.isEditMode?"pi pi-check":"pi pi-plus")("disabled",i.filterForm.invalid||!i.imagePreview&&!i.selectedFile)}},dependencies:[P,w,$,je,He,Re,Be,Ve,Ne,Ue,ze,Je,We,K,I,ct,st,nt,it,at,lt,Y,X,ie,te],styles:[".filter-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.filter-form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.filter-form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:var(--text-color)}.filter-form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{color:var(--text-color-secondary);font-size:.85rem}.filter-form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   .p-error[_ngcontent-%COMP%]{font-size:.85rem;color:var(--red-500)}.filter-form[_ngcontent-%COMP%]   .platform-options[_ngcontent-%COMP%]{display:flex;gap:2rem}.filter-form[_ngcontent-%COMP%]   .platform-options[_ngcontent-%COMP%]   .field-radiobutton[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;cursor:pointer}.filter-form[_ngcontent-%COMP%]   .platform-options[_ngcontent-%COMP%]   .field-radiobutton[_ngcontent-%COMP%]   .radio-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;cursor:pointer;font-weight:500}.filter-form[_ngcontent-%COMP%]   .image-upload-area[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]{position:relative;width:120px;height:120px;border-radius:8px;overflow:hidden;border:1px solid var(--surface-border)}.filter-form[_ngcontent-%COMP%]   .image-upload-area[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.filter-form[_ngcontent-%COMP%]   .image-upload-area[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]{position:absolute;top:4px;right:4px;width:24px;height:24px;border-radius:50%;background:#0009;color:#fff;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center}.filter-form[_ngcontent-%COMP%]   .image-upload-area[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]:hover{background:var(--red-500)}.filter-form[_ngcontent-%COMP%]   .image-upload-area[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.8rem}.filter-form[_ngcontent-%COMP%]   .image-upload-area[_ngcontent-%COMP%]   .upload-zone[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.filter-form[_ngcontent-%COMP%]   .image-upload-area[_ngcontent-%COMP%]   .upload-zone[_ngcontent-%COMP%]   .upload-hint[_ngcontent-%COMP%]{margin:0;font-size:.8rem;color:var(--text-color-secondary)}.filter-form[_ngcontent-%COMP%]   .switch-field[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.filter-form[_ngcontent-%COMP%]   .switch-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:column;cursor:pointer}.filter-form[_ngcontent-%COMP%]   .switch-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .switch-hint[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-color-secondary);font-weight:400}.filter-form[_ngcontent-%COMP%]   .info-box[_ngcontent-%COMP%]{background:var(--surface-100);padding:1rem;border-radius:6px;border-left:4px solid var(--primary-color);display:flex;gap:1rem}.filter-form[_ngcontent-%COMP%]   .info-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary-color);font-size:1.5rem}.filter-form[_ngcontent-%COMP%]   .info-box[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 .25rem;font-size:.9rem}.filter-form[_ngcontent-%COMP%]   .info-box[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{margin:0}.filter-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;padding-top:1rem;border-top:1px solid var(--surface-border)}.w-full[_ngcontent-%COMP%]{width:100%}"]})};var yi=()=>({width:"500px"}),ut=class t{filterService=S(Xe);messageService=S(le);confirmationService=S(V);filters=D([]);isLoading=D(!1);displayDialog=!1;selectedFilter=D(null);isEditMode=D(!1);ngOnInit(){this.loadFilters()}loadFilters(){this.isLoading.set(!0),this.filterService.getAllFilters().subscribe({next:n=>{this.filters.set(n.data),this.isLoading.set(!1)},error:n=>{console.error("Erreur chargement filtres:",n),this.messageService.add({severity:"error",summary:"Erreur",detail:"Impossible de charger les filtres"}),this.isLoading.set(!1)}})}openCreateDialog(){this.isEditMode.set(!1),this.selectedFilter.set(null),this.displayDialog=!0}openEditDialog(n){this.isEditMode.set(!0),this.selectedFilter.set(n),this.displayDialog=!0}closeDialog(){this.displayDialog=!1,this.selectedFilter.set(null)}handleSave(n){this.isEditMode()&&this.selectedFilter()?this.filterService.updateFilter(this.selectedFilter().id,n).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Succ\xE8s",detail:"Filtre mis \xE0 jour"}),this.closeDialog(),this.loadFilters()},error:e=>{console.error("Erreur mise \xE0 jour:",e),this.messageService.add({severity:"error",summary:"Erreur",detail:"Impossible de mettre \xE0 jour le filtre"})}}):this.filterService.createFilter(n).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Succ\xE8s",detail:"Filtre cr\xE9\xE9"}),this.closeDialog(),this.loadFilters()},error:e=>{console.error("Erreur cr\xE9ation:",e),this.messageService.add({severity:"error",summary:"Erreur",detail:"Impossible de cr\xE9er le filtre"})}})}handleDelete(n){this.confirmationService.confirm({message:"Voulez-vous vraiment supprimer ce filtre ?",header:"Confirmation de suppression",icon:"pi pi-exclamation-triangle",acceptLabel:"Supprimer",rejectLabel:"Annuler",acceptButtonStyleClass:"p-button-danger",accept:()=>{this.filterService.deleteFilter(n).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Supprim\xE9",detail:"Filtre supprim\xE9 avec succ\xE8s"}),this.loadFilters()},error:e=>{console.error("Erreur suppression:",e),this.messageService.add({severity:"error",summary:"Erreur",detail:"Impossible de supprimer le filtre"})}})}})}handleToggleActive(n){let e=!n.isActive,i=new FormData;i.append("isActive",e.toString()),this.filterService.updateFilter(n.id,i).subscribe({next:()=>{this.messageService.add({severity:e?"success":"warn",summary:e?"Activ\xE9":"D\xE9sactiv\xE9",detail:`Le filtre a \xE9t\xE9 ${e?"activ\xE9":"d\xE9sactiv\xE9"}`}),this.loadFilters()},error:o=>{console.error("Erreur toggle:",o),this.messageService.add({severity:"error",summary:"Erreur",detail:"Impossible de modifier le statut"})}})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=O({type:t,selectors:[["app-filters"]],features:[H([le,V])],decls:6,vars:11,consts:[[1,"filters-container"],[3,"onAdd","onEdit","onDelete","onToggleActive","filters","loading"],[3,"visibleChange","onHide","visible","header","modal","closable","draggable"],[3,"onSave","onCancel","filter"]],template:function(e,i){e&1&&(u(0,"p-toast")(1,"p-confirmDialog"),r(2,"div",0)(3,"app-filter-list",1),g("onAdd",function(){return i.openCreateDialog()})("onEdit",function(c){return i.openEditDialog(c)})("onDelete",function(c){return i.handleDelete(c)})("onToggleActive",function(c){return i.handleToggleActive(c)}),l(),r(4,"p-dialog",2),Pe("visibleChange",function(c){return Oe(i.displayDialog,c)||(i.displayDialog=c),c}),g("onHide",function(){return i.closeDialog()}),r(5,"app-filter-form",3),g("onSave",function(c){return i.handleSave(c)})("onCancel",function(){return i.closeDialog()}),l()()()),e&2&&(s(3),a("filters",i.filters())("loading",i.isLoading()),s(),R(Se(10,yi)),Me("visible",i.displayDialog),a("header",i.isEditMode()?"Modifier le filtre":"Nouveau filtre Snapchat")("modal",!0)("closable",!0)("draggable",!1),s(),a("filter",i.selectedFilter()))},dependencies:[P,Ye,ee,tt,et,dt,fe,ne,oe],styles:[".filters-container[_ngcontent-%COMP%]{padding:1.5rem;max-width:1400px;margin:0 auto}[_nghost-%COMP%]     .p-dialog .p-dialog-header{padding:1.25rem 1.5rem;border-bottom:1px solid var(--surface-border)}[_nghost-%COMP%]     .p-dialog .p-dialog-content{padding:1.5rem}"]})};export{ut as FiltersComponent};
