import{a as Y,b as tt,e as ee,f as te,g as ot,h as rt,i as lt,j as at,k as ie,l as ne,o as st,p as ct,q as pt,r as mt}from"./chunk-MUL63XKZ.js";import{b as it,c as nt}from"./chunk-ZAVYEOSM.js";import{b as Ue,c as Z,e as Ne,f as ze,h as $e,i as He,j as Qe,k as qe,m as Ge,n as Xe,o as Ye,u as A,v as X}from"./chunk-IY4WSVLS.js";import{b as Ke}from"./chunk-DUZYKJKU.js";import"./chunk-3POAWTZK.js";import{H as Ze,S as se,W as We,X as I,Y as R,aa as ce,da as Je,ea as W,fa as J,ga as pe,q as B}from"./chunk-PMVA72OO.js";import{g as De,i as k,k as je,l as Le,m as G,n as Be,o as F,v as Re,z as Ve}from"./chunk-K7HMDSOI.js";import{c as et,d as me,f as K,h as de,i as fe,k as ue}from"./chunk-F2X3VGZZ.js";import{$ as _,$b as ke,Ab as Te,Bb as Me,Cb as y,Eb as x,Fb as T,Ha as ve,Hb as m,Ia as D,Ib as H,Jb as E,Ka as s,Lb as Oe,Mb as Pe,Nb as Fe,Ob as Q,P as U,Pa as j,Pb as Se,Q as _e,Qb as Ee,Sb as we,Ua as P,V as O,Va as ye,Ya as xe,Zb as w,_ as Ce,_a as d,_b as q,aa as C,ac as Ie,bc as L,ca as he,fb as a,ia as h,ib as N,ja as be,jb as z,jc as b,kb as M,kc as Ae,na as S,ob as r,pb as l,qb as u,tb as $,ub as v,yb as g,zb as p}from"./chunk-KHOYMPRU.js";var ht=["header"],bt=["footer"],vt=["rejecticon"],yt=["accepticon"],xt=["message"],Tt=["icon"],Mt=["headless"],Ot=[[["p-footer"]]],Pt=["p-footer"],Ft=(t,i,e)=>({$implicit:t,onAccept:i,onReject:e}),St=t=>({$implicit:t});function Et(t,i){t&1&&$(0)}function wt(t,i){if(t&1&&d(0,Et,1,0,"ng-container",6),t&2){let e=p(2);a("ngTemplateOutlet",e.headlessTemplate||e._headlessTemplate)("ngTemplateOutletContext",we(2,Ft,e.confirmation,e.onAccept.bind(e),e.onReject.bind(e)))}}function kt(t,i){t&1&&d(0,wt,1,6,"ng-template",null,2,L)}function It(t,i){t&1&&$(0)}function At(t,i){if(t&1&&(r(0,"div",7),d(1,It,1,0,"ng-container",8),l()),t&2){let e=p(3);a("ngClass",e.cx("header")),s(),a("ngTemplateOutlet",e.headerTemplate||e._headerTemplate)}}function Dt(t,i){t&1&&d(0,At,2,2,"ng-template",null,4,L)}function jt(t,i){}function Lt(t,i){t&1&&d(0,jt,0,0,"ng-template")}function Bt(t,i){if(t&1&&d(0,Lt,1,0,null,8),t&2){let e=p(3);a("ngTemplateOutlet",e.iconTemplate||e._iconTemplate)}}function Rt(t,i){if(t&1&&u(0,"i",7),t&2){let e=p(4);z(e.option("icon")),a("ngClass",e.cx("icon"))}}function Vt(t,i){if(t&1&&d(0,Rt,1,3,"i",11),t&2){let e=p(3);a("ngIf",e.option("icon"))}}function Ut(t,i){}function Nt(t,i){t&1&&d(0,Ut,0,0,"ng-template")}function zt(t,i){if(t&1&&d(0,Nt,1,0,null,6),t&2){let e=p(3);a("ngTemplateOutlet",e.messageTemplate||e._messageTemplate)("ngTemplateOutletContext",Ee(2,St,e.confirmation))}}function $t(t,i){if(t&1&&u(0,"span",10),t&2){let e=p(3);a("ngClass",e.cx("message"))("innerHTML",e.option("message"),ve)}}function Ht(t,i){if(t&1&&d(0,Bt,1,1)(1,Vt,1,1,"i",9)(2,zt,1,4)(3,$t,1,2,"span",10),t&2){let e=p(2);M(e.iconTemplate||e._iconTemplate?0:!e.iconTemplate&&!e._iconTemplate&&!e._messageTemplate&&!e.messageTemplate?1:-1),s(2),M(e.messageTemplate||e._messageTemplate?2:3)}}function Qt(t,i){if(t&1&&d(0,Dt,2,0)(1,Ht,4,2,"ng-template",null,3,L),t&2){let e=p();M(e.headerTemplate||e._headerTemplate?0:-1)}}function qt(t,i){t&1&&$(0)}function Gt(t,i){if(t&1&&(Me(0),d(1,qt,1,0,"ng-container",8)),t&2){let e=p(2);s(),a("ngTemplateOutlet",e.footerTemplate||e._footerTemplate)}}function Zt(t,i){if(t&1&&u(0,"i"),t&2){let e=p(5);z(e.option("rejectIcon"))}}function Wt(t,i){if(t&1&&d(0,Zt,1,2,"i",15),t&2){let e=p(4);a("ngIf",e.option("rejectIcon"))}}function Jt(t,i){}function Kt(t,i){t&1&&d(0,Jt,0,0,"ng-template")}function Xt(t,i){if(t&1){let e=v();r(0,"p-button",13),g("onClick",function(){_(e);let o=p(3);return C(o.onReject())}),d(1,Wt,1,1,"i",14)(2,Kt,1,0,null,8),l()}if(t&2){let e=p(3);a("label",e.rejectButtonLabel)("styleClass",e.getButtonStyleClass("pcRejectButton","rejectButtonStyleClass"))("ariaLabel",e.option("rejectButtonProps","ariaLabel"))("buttonProps",e.getRejectButtonProps()),s(),M(e.rejectIcon&&!e.rejectIconTemplate&&!e._rejectIconTemplate?1:-1),s(),a("ngTemplateOutlet",e.rejectIconTemplate||e._rejectIconTemplate)}}function Yt(t,i){if(t&1&&u(0,"i"),t&2){let e=p(5);z(e.option("acceptIcon"))}}function ei(t,i){if(t&1&&d(0,Yt,1,2,"i",15),t&2){let e=p(4);a("ngIf",e.option("acceptIcon"))}}function ti(t,i){}function ii(t,i){t&1&&d(0,ti,0,0,"ng-template")}function ni(t,i){if(t&1){let e=v();r(0,"p-button",13),g("onClick",function(){_(e);let o=p(3);return C(o.onAccept())}),d(1,ei,1,1,"i",14)(2,ii,1,0,null,8),l()}if(t&2){let e=p(3);a("label",e.acceptButtonLabel)("styleClass",e.getButtonStyleClass("pcAcceptButton","acceptButtonStyleClass"))("ariaLabel",e.option("acceptButtonProps","ariaLabel"))("buttonProps",e.getAcceptButtonProps()),s(),M(e.acceptIcon&&!e._acceptIconTemplate&&!e.acceptIconTemplate?1:-1),s(),a("ngTemplateOutlet",e.acceptIconTemplate||e._acceptIconTemplate)}}function oi(t,i){if(t&1&&d(0,Xt,3,6,"p-button",12)(1,ni,3,6,"p-button",12),t&2){let e=p(2);a("ngIf",e.option("rejectVisible")),s(),a("ngIf",e.option("acceptVisible"))}}function ri(t,i){if(t&1&&d(0,Gt,2,1)(1,oi,2,2),t&2){let e=p();M(e.footerTemplate||e._footerTemplate?0:-1),s(),M(!e.footerTemplate&&!e._footerTemplate?1:-1)}}var li=({dt:t})=>`
.p-confirmdialog .p-dialog-content {
    display: flex;
    align-items: center;
    gap:  ${t("confirmdialog.content.gap")};
}

.p-confirmdialog .p-confirmdialog-icon {
    color: ${t("confirmdialog.icon.color")};
    font-size: ${t("confirmdialog.icon.size")};
    width: ${t("confirmdialog.icon.size")};
    height: ${t("confirmdialog.icon.size")};
}
`,ai={root:"p-confirmdialog",icon:"p-confirmdialog-icon",message:"p-confirmdialog-message",pcRejectButton:"p-confirmdialog-reject-button",pcAcceptButton:"p-confirmdialog-accept-button"},dt=(()=>{class t extends We{name="confirmdialog";theme=li;classes=ai;static \u0275fac=(()=>{let e;return function(o){return(e||(e=he(t)))(o||t)}})();static \u0275prov=U({token:t,factory:t.\u0275fac})}return t})();var si=fe([K({transform:"{{transform}}",opacity:0}),me("{{transition}}",K({transform:"none",opacity:1}))]),ci=fe([me("{{transition}}",K({transform:"{{transform}}",opacity:0}))]),ge=(()=>{class t extends Ke{confirmationService;zone;header;icon;message;get style(){return this._style}set style(e){this._style=e,this.cd.markForCheck()}styleClass;maskStyleClass;acceptIcon;acceptLabel;closeAriaLabel;acceptAriaLabel;acceptVisible=!0;rejectIcon;rejectLabel;rejectAriaLabel;rejectVisible=!0;acceptButtonStyleClass;rejectButtonStyleClass;closeOnEscape=!0;dismissableMask;blockScroll=!0;rtl=!1;closable=!0;appendTo="body";key;autoZIndex=!0;baseZIndex=0;transitionOptions="150ms cubic-bezier(0, 0, 0.2, 1)";focusTrap=!0;defaultFocus="accept";breakpoints;get visible(){return this._visible}set visible(e){this._visible=e,this._visible&&!this.maskVisible&&(this.maskVisible=!0),this.cd.markForCheck()}get position(){return this._position}set position(e){switch(this._position=e,e){case"topleft":case"bottomleft":case"left":this.transformOptions="translate3d(-100%, 0px, 0px)";break;case"topright":case"bottomright":case"right":this.transformOptions="translate3d(100%, 0px, 0px)";break;case"bottom":this.transformOptions="translate3d(0px, 100%, 0px)";break;case"top":this.transformOptions="translate3d(0px, -100%, 0px)";break;default:this.transformOptions="scale(0.7)";break}}draggable=!0;onHide=new h;footer;_componentStyle=O(dt);headerTemplate;footerTemplate;rejectIconTemplate;acceptIconTemplate;messageTemplate;iconTemplate;headlessTemplate;templates;_headerTemplate;_footerTemplate;_rejectIconTemplate;_acceptIconTemplate;_messageTemplate;_iconTemplate;_headlessTemplate;confirmation;_visible;_style;maskVisible;dialog;wrapper;contentContainer;subscription;preWidth;_position="center";transformOptions="scale(0.7)";styleElement;id=se("pn_id_");ariaLabelledBy=this.getAriaLabelledBy();translationSubscription;get containerClass(){return this.cx("root")+" "+this.styleClass||" "}constructor(e,n){super(),this.confirmationService=e,this.zone=n,this.subscription=this.confirmationService.requireConfirmation$.subscribe(o=>{if(!o){this.hide();return}o.key===this.key&&(this.confirmation=o,Object.keys(o).forEach(f=>{this[f]=o[f]}),this.confirmation.accept&&(this.confirmation.acceptEvent=new h,this.confirmation.acceptEvent.subscribe(this.confirmation.accept)),this.confirmation.reject&&(this.confirmation.rejectEvent=new h,this.confirmation.rejectEvent.subscribe(this.confirmation.reject)),this.visible=!0)})}ngOnInit(){super.ngOnInit(),this.breakpoints&&this.createStyle(),this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.visible&&this.cd.markForCheck()})}ngAfterContentInit(){this.templates?.forEach(e=>{switch(e.getType()){case"header":this._headerTemplate=e.template;break;case"footer":this._footerTemplate=e.template;break;case"message":this._messageTemplate=e.template;break;case"icon":this._iconTemplate=e.template;break;case"rejecticon":this._rejectIconTemplate=e.template;break;case"accepticon":this._acceptIconTemplate=e.template;break;case"headless":this._headlessTemplate=e.template;break}})}getAriaLabelledBy(){return this.header!==null?se("pn_id_")+"_header":null}option(e,n){let o=this;if(o.hasOwnProperty(e))return n?o[n]:o[e]}getButtonStyleClass(e,n){let o=this.cx(e),c=this.option(n);return[o,c].filter(Boolean).join(" ")}getElementToFocus(){switch(this.option("defaultFocus")){case"accept":return B(this.dialog.el.nativeElement,".p-confirm-dialog-accept");case"reject":return B(this.dialog.el.nativeElement,".p-confirm-dialog-reject");case"close":return B(this.dialog.el.nativeElement,".p-dialog-header-close");case"none":return null;default:return B(this.dialog.el.nativeElement,".p-confirm-dialog-accept")}}createStyle(){if(!this.styleElement){this.styleElement=this.document.createElement("style"),this.styleElement.type="text/css",this.document.head.appendChild(this.styleElement);let e="";for(let n in this.breakpoints)e+=`
                    @media screen and (max-width: ${n}) {
                        .p-dialog[${this.id}] {
                            width: ${this.breakpoints[n]} !important;
                        }
                    }
                `;this.styleElement.innerHTML=e,Ze(this.styleElement,"nonce",this.config?.csp()?.nonce)}}close(){this.confirmation?.rejectEvent&&this.confirmation.rejectEvent.emit(I.CANCEL),this.hide(I.CANCEL)}hide(e){this.onHide.emit(e),this.visible=!1,this.unsubscribeConfirmationEvents(),this.confirmation=null}destroyStyle(){this.styleElement&&(this.document.head.removeChild(this.styleElement),this.styleElement=null)}ngOnDestroy(){this.subscription.unsubscribe(),this.unsubscribeConfirmationEvents(),this.translationSubscription&&this.translationSubscription.unsubscribe(),this.destroyStyle(),super.ngOnDestroy()}onVisibleChange(e){e?this.visible=e:this.close()}onAccept(){this.confirmation&&this.confirmation.acceptEvent&&this.confirmation.acceptEvent.emit(),this.hide(I.ACCEPT)}onReject(){this.confirmation&&this.confirmation.rejectEvent&&this.confirmation.rejectEvent.emit(I.REJECT),this.hide(I.REJECT)}unsubscribeConfirmationEvents(){this.confirmation&&(this.confirmation.acceptEvent?.unsubscribe(),this.confirmation.rejectEvent?.unsubscribe())}get acceptButtonLabel(){return this.option("acceptLabel")||this.config.getTranslation(pe.ACCEPT)}get rejectButtonLabel(){return this.option("rejectLabel")||this.config.getTranslation(pe.REJECT)}getAcceptButtonProps(){return this.option("acceptButtonProps")}getRejectButtonProps(){return this.option("rejectButtonProps")}static \u0275fac=function(n){return new(n||t)(j(R),j(be))};static \u0275cmp=P({type:t,selectors:[["p-confirmDialog"],["p-confirmdialog"],["p-confirm-dialog"]],contentQueries:function(n,o,c){if(n&1&&(y(c,Je,5),y(c,ht,4),y(c,bt,4),y(c,vt,4),y(c,yt,4),y(c,xt,4),y(c,Tt,4),y(c,Mt,4),y(c,W,4)),n&2){let f;x(f=T())&&(o.footer=f.first),x(f=T())&&(o.headerTemplate=f.first),x(f=T())&&(o.footerTemplate=f.first),x(f=T())&&(o.rejectIconTemplate=f.first),x(f=T())&&(o.acceptIconTemplate=f.first),x(f=T())&&(o.messageTemplate=f.first),x(f=T())&&(o.iconTemplate=f.first),x(f=T())&&(o.headlessTemplate=f.first),x(f=T())&&(o.templates=f)}},inputs:{header:"header",icon:"icon",message:"message",style:"style",styleClass:"styleClass",maskStyleClass:"maskStyleClass",acceptIcon:"acceptIcon",acceptLabel:"acceptLabel",closeAriaLabel:"closeAriaLabel",acceptAriaLabel:"acceptAriaLabel",acceptVisible:[2,"acceptVisible","acceptVisible",b],rejectIcon:"rejectIcon",rejectLabel:"rejectLabel",rejectAriaLabel:"rejectAriaLabel",rejectVisible:[2,"rejectVisible","rejectVisible",b],acceptButtonStyleClass:"acceptButtonStyleClass",rejectButtonStyleClass:"rejectButtonStyleClass",closeOnEscape:[2,"closeOnEscape","closeOnEscape",b],dismissableMask:[2,"dismissableMask","dismissableMask",b],blockScroll:[2,"blockScroll","blockScroll",b],rtl:[2,"rtl","rtl",b],closable:[2,"closable","closable",b],appendTo:"appendTo",key:"key",autoZIndex:[2,"autoZIndex","autoZIndex",b],baseZIndex:[2,"baseZIndex","baseZIndex",Ae],transitionOptions:"transitionOptions",focusTrap:[2,"focusTrap","focusTrap",b],defaultFocus:"defaultFocus",breakpoints:"breakpoints",visible:"visible",position:"position",draggable:[2,"draggable","draggable",b]},outputs:{onHide:"onHide"},features:[Q([dt]),xe],ngContentSelectors:Pt,decls:6,vars:14,consts:[["dialog",""],["footer",""],["headless",""],["content",""],["header",""],["role","alertdialog",3,"visibleChange","visible","closable","styleClass","modal","header","closeOnEscape","blockScroll","appendTo","position","dismissableMask","draggable"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngClass"],[4,"ngTemplateOutlet"],[3,"ngClass","class"],[3,"ngClass","innerHTML"],[3,"ngClass","class",4,"ngIf"],[3,"label","styleClass","ariaLabel","buttonProps","onClick",4,"ngIf"],[3,"onClick","label","styleClass","ariaLabel","buttonProps"],[3,"class"],[3,"class",4,"ngIf"]],template:function(n,o){if(n&1){let c=v();Te(Ot),r(0,"p-dialog",5,0),g("visibleChange",function(V){return _(c),C(o.onVisibleChange(V))}),d(2,kt,2,0)(3,Qt,3,1)(4,ri,2,2,"ng-template",null,1,L),l()}n&2&&(N(o.style),a("visible",o.visible)("closable",o.option("closable"))("styleClass",o.containerClass)("modal",!0)("header",o.option("header"))("closeOnEscape",o.option("closeOnEscape"))("blockScroll",o.option("blockScroll"))("appendTo",o.option("appendTo"))("position",o.position)("dismissableMask",o.dismissableMask)("draggable",o.draggable),s(2),M(o.headlessTemplate||o._headlessTemplate?2:3))},dependencies:[F,De,k,je,A,Y,J],encapsulation:2,data:{animation:[et("animation",[de("void => visible",[ue(si)]),de("visible => void",[ue(ci)])])]},changeDetection:0})}return t})(),ut=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=ye({type:t});static \u0275inj=_e({imports:[ge,J,J]})}return t})();var re=class t{http=O(Re);API_URL=`${Ve.apiUrl}/filters`;filters=S([]);getAllFilters(){return this.http.get(this.API_URL,{withCredentials:!0})}getFilterById(i){return this.http.get(`${this.API_URL}/${i}`,{withCredentials:!0})}createFilter(i){return this.http.post(this.API_URL,i,{withCredentials:!0})}updateFilter(i,e){return this.http.put(`${this.API_URL}/${i}`,e,{withCredentials:!0})}deleteFilter(i){return this.http.delete(`${this.API_URL}/${i}`,{withCredentials:!0})}static \u0275fac=function(e){return new(e||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})};function ui(t,i){t&1&&(r(0,"tr")(1,"th",9),m(2,"R\xE9seaux"),l(),r(3,"th",9),m(4,"Image"),l(),r(5,"th",10),m(6,"Nom"),l(),r(7,"th"),m(8,"Lien"),l(),r(9,"th",11),m(10,"Utilisations"),l(),r(11,"th",12),m(12,"Statut"),l(),r(13,"th",13),m(14,"Actions"),l()())}function gi(t,i){if(t&1&&u(0,"img",28),t&2){let e=p().$implicit;a("src",e.imageUrl,D)("alt",e.name||"Filtre")}}function _i(t,i){t&1&&(r(0,"div",29),u(1,"i",30),l())}function Ci(t,i){if(t&1){let e=v();r(0,"tr")(1,"td")(2,"div",14)(3,"span"),m(4),l()()(),r(5,"td")(6,"div",15),d(7,gi,1,2,"img",16)(8,_i,2,0,"div",17),l()(),r(9,"td")(10,"div",18)(11,"span"),m(12),l()()(),r(13,"td")(14,"div",19)(15,"a",20),m(16),w(17,"slice"),l(),r(18,"p-button",21),g("onClick",function(){let o=_(e).$implicit,c=p();return C(c.openSnapchatLink(o.snapchatUrl))}),l()()(),r(19,"td",22)(20,"div",23)(21,"span"),m(22),w(23,"number"),l()()(),r(24,"td",22),u(25,"p-tag",24),l(),r(26,"td")(27,"div",25)(28,"p-button",26),g("onClick",function(){let o=_(e).$implicit,c=p();return C(c.onEdit.emit(o))}),l(),r(29,"p-button",27),g("onClick",function(){let o=_(e).$implicit,c=p();return C(c.onDelete.emit(o.id))}),l()()()()}if(t&2){let e=i.$implicit,n=p();s(4),H(e.platform),s(3),a("ngIf",e.imageUrl),s(),a("ngIf",!e.imageUrl),s(4),H(e.name||"Sans nom"),s(3),a("href",e.snapchatUrl,D),s(),E(" ",Ie(17,15,e.filterUrl,0,40),"... "),s(2),a("rounded",!0)("text",!0),s(4),H(q(23,19,e.usageCount)),s(3),a("value",e.isActive?"Actif":"Inactif")("severity",n.getSeverity(e.isActive)),s(3),a("rounded",!0)("text",!0),s(),a("rounded",!0)("text",!0)}}function hi(t,i){if(t&1){let e=v();r(0,"tr")(1,"td",31)(2,"div",32),u(3,"i",33),r(4,"h3"),m(5,"Aucun filtre Snapchat"),l(),r(6,"p"),m(7,"Commencez par cr\xE9er votre premier filtre"),l(),r(8,"p-button",34),g("onClick",function(){_(e);let o=p();return C(o.onAdd.emit())}),l()()()()}}var le=class t{filters=[];loading=!1;onAdd=new h;onEdit=new h;onDelete=new h;onToggleActive=new h;getSeverity(i){return i?"success":"danger"}openSnapchatLink(i){window.open(i,"_blank")}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=P({type:t,selectors:[["app-filter-list"]],inputs:{filters:"filters",loading:"loading"},outputs:{onAdd:"onAdd",onEdit:"onEdit",onDelete:"onDelete",onToggleActive:"onToggleActive"},decls:12,vars:5,consts:[[1,"filter-list"],[1,"list-header"],[1,"header-info"],[1,"subtitle"],["label","Nouveau Filtre","icon","pi pi-plus",3,"onClick"],["currentPageReportTemplate","Affichage {first} \xE0 {last} sur {totalRecords} filtres","styleClass","p-datatable-striped p-datatable-gridlines",3,"value","loading","paginator","rows","showCurrentPageReport"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[2,"width","80px"],[2,"width","180px"],[1,"text-center",2,"width","120px"],[1,"text-center",2,"width","100px"],[1,"text-center",2,"width","150px"],[1,"filter-platform"],[1,"filter-image"],["class","thumbnail",3,"src","alt",4,"ngIf"],["class","no-image",4,"ngIf"],[1,"filter-name"],[1,"snapchat-link"],["target","_blank","pTooltip","Ouvrir dans Snapchat",1,"link-text",3,"href"],["icon","pi pi-external-link","size","small","pTooltip","Ouvrir",3,"onClick","rounded","text"],[1,"text-center"],[1,"usage-badge"],[3,"value","severity"],[1,"action-buttons"],["icon","pi pi-pencil","pTooltip","Modifier",3,"onClick","rounded","text"],["icon","pi pi-trash","severity","danger","pTooltip","Supprimer",3,"onClick","rounded","text"],[1,"thumbnail",3,"src","alt"],[1,"no-image"],[1,"pi","pi-image"],["colspan","6",1,"empty-state"],[1,"empty-content"],[1,"pi","pi-camera"],["label","Cr\xE9er un filtre","icon","pi pi-plus",3,"onClick"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),m(4,"Gestion des Filtres Snapchat"),l(),r(5,"p",3),m(6,"G\xE9rez les filtres Snapchat de la campagne"),l()(),r(7,"p-button",4),g("onClick",function(){return n.onAdd.emit()}),l()(),r(8,"p-table",5),d(9,ui,15,0,"ng-template",6)(10,Ci,30,21,"ng-template",7)(11,hi,9,0,"ng-template",8),l()()),e&2&&(s(8),a("value",n.filters)("loading",n.loading)("paginator",!0)("rows",10)("showCurrentPageReport",!0))},dependencies:[F,k,Be,G,at,lt,W,X,A,ne,ie,te,ee],styles:[".filter-list[_ngcontent-%COMP%]   .list-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:1.5rem;flex-wrap:wrap;gap:1rem}.filter-list[_ngcontent-%COMP%]   .list-header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 .25rem;font-size:1.5rem}.filter-list[_ngcontent-%COMP%]   .list-header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin:0;color:var(--text-color-secondary);font-size:.9rem}.filter-list[_ngcontent-%COMP%]   .filter-image[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]{width:50px;height:50px;object-fit:cover;border-radius:8px;border:2px solid var(--surface-border)}.filter-list[_ngcontent-%COMP%]   .filter-image[_ngcontent-%COMP%]   .no-image[_ngcontent-%COMP%]{width:50px;height:50px;display:flex;align-items:center;justify-content:center;background:var(--surface-100);border-radius:8px;border:2px dashed var(--surface-border)}.filter-list[_ngcontent-%COMP%]   .filter-image[_ngcontent-%COMP%]   .no-image[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem;color:var(--text-color-secondary)}.filter-list[_ngcontent-%COMP%]   .filter-name[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:500}.filter-list[_ngcontent-%COMP%]   .snapchat-link[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.filter-list[_ngcontent-%COMP%]   .snapchat-link[_ngcontent-%COMP%]   .link-text[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none;font-size:.9rem;word-break:break-all}.filter-list[_ngcontent-%COMP%]   .snapchat-link[_ngcontent-%COMP%]   .link-text[_ngcontent-%COMP%]:hover{text-decoration:underline}.filter-list[_ngcontent-%COMP%]   .usage-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;background:var(--surface-100);padding:.35rem .75rem;border-radius:20px;font-weight:600}.filter-list[_ngcontent-%COMP%]   .usage-badge[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.85rem;color:var(--primary-color)}.filter-list[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:.25rem}.filter-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{padding:3rem!important}.filter-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.5rem;text-align:center}.filter-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;color:var(--text-color-secondary);margin-bottom:.5rem}.filter-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.25rem}.filter-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 1rem;color:var(--text-color-secondary)}.filter-list[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%]{text-align:center}"]})};function bi(t,i){t&1&&(r(0,"small",28),m(1," L'URL est requise "),l())}function vi(t,i){t&1&&(r(0,"small",28),m(1," Maximum 100 caract\xE8res "),l())}function yi(t,i){if(t&1&&(r(0,"div",29),u(1,"i",30),r(2,"div",31)(3,"span")(4,"strong"),m(5,"Utilisations :"),l(),m(6),w(7,"number"),l(),r(8,"span")(9,"strong"),m(10,"Cr\xE9\xE9 le :"),l(),m(11),w(12,"date"),l()()()),t&2){let e=p();s(6),E(" ",q(7,2,e.filter.usageCount)," fois"),s(5),E(" ",ke(12,4,e.filter.createdAt,"dd/MM/yyyy \xE0 HH:mm"),"")}}function xi(t,i){if(t&1){let e=v();r(0,"div",32),u(1,"img",33),r(2,"button",34),g("click",function(){_(e);let o=p();return C(o.removeImage())}),u(3,"i",35),l()()}if(t&2){let e=p();s(),a("src",e.imagePreview,D)}}function Ti(t,i){if(t&1){let e=v();r(0,"div")(1,"p-fileUpload",36),g("onSelect",function(o){_(e);let c=p();return C(c.onFileSelect(o))}),l(),r(2,"small",37),m(3,"PNG, JPG, WEBP (max 5MB)"),l()()}t&2&&(s(),a("maxFileSize",5e6)("auto",!1))}var ae=class t{constructor(i){this.fb=i;this.filterForm=this.fb.group({name:["",[Z.maxLength(100)]],filterUrl:["",[Z.required]],platform:["SNAPCHAT",[Z.required]],isActive:[!0]})}filter=null;onSave=new h;onCancel=new h;filterForm;isEditMode=!1;imagePreview=null;selectedFile=null;ngOnChanges(i){i.filter&&(this.filter?(this.isEditMode=!0,this.filterForm.patchValue({name:this.filter.name||"",filterUrl:this.filter.filterUrl,platform:this.filter.platform||"SNAPCHAT",isActive:this.filter.isActive}),this.imagePreview=this.filter.imageUrl,this.selectedFile=null):(this.isEditMode=!1,this.filterForm.reset({name:"",filterUrl:"",platform:"SNAPCHAT",isActive:!0}),this.imagePreview=null,this.selectedFile=null))}onFileSelect(i){let e=i.files[0];if(e){this.selectedFile=e;let n=new FileReader;n.onload=()=>{this.imagePreview=n.result},n.readAsDataURL(e)}}removeImage(){this.selectedFile=null,this.imagePreview=this.isEditMode&&this.filter?.imageUrl||null}submit(){if(this.filterForm.valid){let i=new FormData,e=this.filterForm.value;e.name&&i.append("name",e.name),i.append("filterUrl",e.filterUrl),i.append("platform",e.platform),i.append("isActive",e.isActive.toString()),this.selectedFile&&i.append("image",this.selectedFile),this.onSave.emit(i)}}get nameControl(){return this.filterForm.get("name")}get filterUrlControl(){return this.filterForm.get("filterUrl")}static \u0275fac=function(e){return new(e||t)(j(qe))};static \u0275cmp=P({type:t,selectors:[["app-filter-form"]],inputs:{filter:"filter"},outputs:{onSave:"onSave",onCancel:"onCancel"},features:[Ce],decls:42,vars:14,consts:[[1,"flex","flex-column","gap-4","py-3",3,"ngSubmit","formGroup"],[1,"flex","align-items-center","justify-content-between","p-3","border-1","surface-border","border-round","bg-gray-50"],[1,"flex","flex-column","gap-1"],["for","isActive",1,"font-bold","cursor-pointer"],[1,"text-500"],[1,"flex","flex-column","align-items-end","gap-2"],["formControlName","isActive","inputId","isActive"],[3,"severity","value"],[1,"flex","flex-column","gap-2"],["for","filterUrl",1,"font-bold"],[1,"p-inputgroup"],["pInputText","","id","filterUrl","formControlName","filterUrl",1,"w-full",3,"placeholder"],["class","p-error",4,"ngIf"],["for","name",1,"font-bold"],["pInputText","","id","name","formControlName","name","placeholder","Ex: Filtre Campagne 2026",1,"w-full"],[1,"font-bold"],[1,"flex","flex-wrap","gap-4"],[1,"flex","align-items-center","gap-2"],["name","platform","value","SNAPCHAT","formControlName","platform","inputId","platformSnap"],["for","platformSnap",1,"cursor-pointer","flex","align-items-center","gap-2"],["name","platform","value","TIKTOK","formControlName","platform","inputId","platformTikTok"],["for","platformTikTok",1,"cursor-pointer","flex","align-items-center","gap-2"],["class","flex align-items-start gap-3 p-3 bg-blue-50 text-blue-700 border-round border-1 border-blue-100",4,"ngIf"],["class","relative mb-2 text-center border-round overflow-hidden border-1 surface-border bg-gray-50 p-3",4,"ngIf"],[4,"ngIf"],[1,"flex","justify-content-end","gap-2","mt-4","pt-3","border-top-1","surface-border"],["label","Annuler","severity","secondary","icon","pi pi-times",3,"onClick","text"],["type","submit",3,"label","icon","disabled"],[1,"p-error"],[1,"flex","align-items-start","gap-3","p-3","bg-blue-50","text-blue-700","border-round","border-1","border-blue-100"],[1,"pi","pi-info-circle","text-xl","mt-1"],[1,"flex","flex-column","gap-1","text-sm"],[1,"relative","mb-2","text-center","border-round","overflow-hidden","border-1","surface-border","bg-gray-50","p-3"],["alt","Aper\xE7u",2,"max-height","200px","width","auto","object-fit","contain",3,"src"],["type","button","pTooltip","Supprimer l'image",1,"absolute","top-0","right-0","m-2","p-link","w-2rem","h-2rem","border-circle","bg-red-500","text-white","flex","align-items-center","justify-content-center","hover:bg-red-600","transition-colors","shadow-2",3,"click"],[1,"pi","pi-times"],["mode","basic","name","image","accept","image/*","chooseLabel","Choisir une image","chooseIcon","pi pi-image","styleClass","p-button-outlined w-full",3,"onSelect","maxFileSize","auto"],[1,"text-500","block","mt-1"]],template:function(e,n){if(e&1&&(r(0,"form",0),g("ngSubmit",function(){return n.submit()}),r(1,"div",1)(2,"div",2)(3,"label",3),m(4,"Statut du filtre"),l(),r(5,"small",4),m(6),l()(),r(7,"div",5),u(8,"p-toggleswitch",6)(9,"p-tag",7),l()(),r(10,"div",8)(11,"label",9),m(12,"Lien du filtre *"),l(),r(13,"div",10),u(14,"input",11),l(),d(15,bi,2,0,"small",12),l(),r(16,"div",8)(17,"label",13),m(18,"Nom du filtre *"),l(),u(19,"input",14),d(20,vi,2,0,"small",12),l(),r(21,"div",8)(22,"label",15),m(23,"Plateforme *"),l(),r(24,"div",16)(25,"div",17),u(26,"p-radioButton",18),r(27,"label",19),m(28," Snapchat "),l()(),r(29,"div",17),u(30,"p-radioButton",20),r(31,"label",21),m(32," TikTok "),l()()()(),d(33,yi,13,7,"div",22),r(34,"div",8)(35,"label",15),m(36,"Image du filtre *"),l(),d(37,xi,4,1,"div",23)(38,Ti,4,2,"div",24),l(),r(39,"div",25)(40,"p-button",26),g("onClick",function(){return n.onCancel.emit()}),l(),u(41,"p-button",27),l()()),e&2){let o,c,f,V;a("formGroup",n.filterForm),s(6),E(" ",(o=n.filterForm.get("isActive"))!=null&&o.value?"Visible sur le site public":"Masqu\xE9 du site public"," "),s(3),a("severity",(c=n.filterForm.get("isActive"))!=null&&c.value?"success":"danger")("value",(f=n.filterForm.get("isActive"))!=null&&f.value?"ACTIF":"INACTIF"),s(5),a("placeholder",((V=n.filterForm.get("platform"))==null?null:V.value)==="SNAPCHAT"?"https://snapchat.com/unlock/...":"https://vm.tiktok.com/..."),s(),a("ngIf",(n.filterUrlControl==null||n.filterUrlControl.errors==null?null:n.filterUrlControl.errors.required)&&(n.filterUrlControl==null?null:n.filterUrlControl.touched)),s(5),a("ngIf",(n.nameControl==null?null:n.nameControl.invalid)&&(n.nameControl==null?null:n.nameControl.touched)),s(13),a("ngIf",n.isEditMode&&n.filter),s(4),a("ngIf",n.imagePreview),s(),a("ngIf",!n.imagePreview),s(2),a("text",!0),s(),a("label",n.isEditMode?"Mettre \xE0 jour":"Cr\xE9er")("icon",n.isEditMode?"pi pi-check":"pi pi-plus")("disabled",n.filterForm.invalid||!n.imagePreview&&!n.selectedFile)}},dependencies:[F,k,G,Le,Ge,$e,Ue,Ne,ze,He,Qe,Ye,Xe,X,A,mt,pt,rt,ot,ct,st,ne,ie,te,ee],styles:[".filter-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.filter-form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.filter-form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:var(--text-color)}.filter-form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{color:var(--text-color-secondary);font-size:.85rem}.filter-form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   .p-error[_ngcontent-%COMP%]{font-size:.85rem;color:var(--red-500)}.filter-form[_ngcontent-%COMP%]   .platform-options[_ngcontent-%COMP%]{display:flex;gap:2rem}.filter-form[_ngcontent-%COMP%]   .platform-options[_ngcontent-%COMP%]   .field-radiobutton[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;cursor:pointer}.filter-form[_ngcontent-%COMP%]   .platform-options[_ngcontent-%COMP%]   .field-radiobutton[_ngcontent-%COMP%]   .radio-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;cursor:pointer;font-weight:500}.filter-form[_ngcontent-%COMP%]   .image-upload-area[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]{position:relative;width:120px;height:120px;border-radius:8px;overflow:hidden;border:1px solid var(--surface-border)}.filter-form[_ngcontent-%COMP%]   .image-upload-area[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.filter-form[_ngcontent-%COMP%]   .image-upload-area[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]{position:absolute;top:4px;right:4px;width:24px;height:24px;border-radius:50%;background:#0009;color:#fff;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center}.filter-form[_ngcontent-%COMP%]   .image-upload-area[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]:hover{background:var(--red-500)}.filter-form[_ngcontent-%COMP%]   .image-upload-area[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.8rem}.filter-form[_ngcontent-%COMP%]   .image-upload-area[_ngcontent-%COMP%]   .upload-zone[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.filter-form[_ngcontent-%COMP%]   .image-upload-area[_ngcontent-%COMP%]   .upload-zone[_ngcontent-%COMP%]   .upload-hint[_ngcontent-%COMP%]{margin:0;font-size:.8rem;color:var(--text-color-secondary)}.filter-form[_ngcontent-%COMP%]   .switch-field[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.filter-form[_ngcontent-%COMP%]   .switch-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:column;cursor:pointer}.filter-form[_ngcontent-%COMP%]   .switch-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .switch-hint[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-color-secondary);font-weight:400}.filter-form[_ngcontent-%COMP%]   .info-box[_ngcontent-%COMP%]{background:var(--surface-100);padding:1rem;border-radius:6px;border-left:4px solid var(--primary-color);display:flex;gap:1rem}.filter-form[_ngcontent-%COMP%]   .info-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary-color);font-size:1.5rem}.filter-form[_ngcontent-%COMP%]   .info-box[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 .25rem;font-size:.9rem}.filter-form[_ngcontent-%COMP%]   .info-box[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{margin:0}.filter-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;padding-top:1rem;border-top:1px solid var(--surface-border)}.w-full[_ngcontent-%COMP%]{width:100%}"]})};var Mi=()=>({width:"500px"}),_t=class t{filterService=O(re);messageService=O(ce);confirmationService=O(R);filters=S([]);isLoading=S(!1);displayDialog=!1;selectedFilter=S(null);isEditMode=S(!1);ngOnInit(){this.loadFilters()}loadFilters(){this.isLoading.set(!0),this.filterService.getAllFilters().subscribe({next:i=>{this.filters.set(i.data),this.isLoading.set(!1)},error:i=>{console.error("Erreur chargement filtres:",i),this.messageService.add({severity:"error",summary:"Erreur",detail:"Impossible de charger les filtres"}),this.isLoading.set(!1)}})}openCreateDialog(){this.isEditMode.set(!1),this.selectedFilter.set(null),this.displayDialog=!0}openEditDialog(i){this.isEditMode.set(!0),this.selectedFilter.set(i),this.displayDialog=!0}closeDialog(){this.displayDialog=!1,this.selectedFilter.set(null)}handleSave(i){this.isEditMode()&&this.selectedFilter()?this.filterService.updateFilter(this.selectedFilter().id,i).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Succ\xE8s",detail:"Filtre mis \xE0 jour"}),this.closeDialog(),this.loadFilters()},error:e=>{console.error("Erreur mise \xE0 jour:",e),this.messageService.add({severity:"error",summary:"Erreur",detail:"Impossible de mettre \xE0 jour le filtre"})}}):this.filterService.createFilter(i).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Succ\xE8s",detail:"Filtre cr\xE9\xE9"}),this.closeDialog(),this.loadFilters()},error:e=>{console.error("Erreur cr\xE9ation:",e),this.messageService.add({severity:"error",summary:"Erreur",detail:"Impossible de cr\xE9er le filtre"})}})}handleDelete(i){this.confirmationService.confirm({message:"Voulez-vous vraiment supprimer ce filtre ?",header:"Confirmation de suppression",icon:"pi pi-exclamation-triangle",acceptLabel:"Supprimer",rejectLabel:"Annuler",acceptButtonStyleClass:"p-button-danger",accept:()=>{this.filterService.deleteFilter(i).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Supprim\xE9",detail:"Filtre supprim\xE9 avec succ\xE8s"}),this.loadFilters()},error:e=>{console.error("Erreur suppression:",e),this.messageService.add({severity:"error",summary:"Erreur",detail:"Impossible de supprimer le filtre"})}})}})}handleToggleActive(i){let e=!i.isActive,n=new FormData;n.append("isActive",e.toString()),this.filterService.updateFilter(i.id,n).subscribe({next:()=>{this.messageService.add({severity:e?"success":"warn",summary:e?"Activ\xE9":"D\xE9sactiv\xE9",detail:`Le filtre a \xE9t\xE9 ${e?"activ\xE9":"d\xE9sactiv\xE9"}`}),this.loadFilters()},error:o=>{console.error("Erreur toggle:",o),this.messageService.add({severity:"error",summary:"Erreur",detail:"Impossible de modifier le statut"})}})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=P({type:t,selectors:[["app-filters"]],features:[Q([ce,R])],decls:6,vars:11,consts:[[1,"filters-container"],[3,"onAdd","onEdit","onDelete","onToggleActive","filters","loading"],[3,"visibleChange","onHide","visible","header","modal","closable","draggable"],[3,"onSave","onCancel","filter"]],template:function(e,n){e&1&&(u(0,"p-toast")(1,"p-confirmDialog"),r(2,"div",0)(3,"app-filter-list",1),g("onAdd",function(){return n.openCreateDialog()})("onEdit",function(c){return n.openEditDialog(c)})("onDelete",function(c){return n.handleDelete(c)})("onToggleActive",function(c){return n.handleToggleActive(c)}),l(),r(4,"p-dialog",2),Fe("visibleChange",function(c){return Pe(n.displayDialog,c)||(n.displayDialog=c),c}),g("onHide",function(){return n.closeDialog()}),r(5,"app-filter-form",3),g("onSave",function(c){return n.handleSave(c)})("onCancel",function(){return n.closeDialog()}),l()()()),e&2&&(s(3),a("filters",n.filters())("loading",n.isLoading()),s(),N(Se(10,Mi)),Oe("visible",n.displayDialog),a("header",n.isEditMode()?"Modifier le filtre":"Nouveau filtre Snapchat")("modal",!0)("closable",!0)("draggable",!1),s(),a("filter",n.selectedFilter()))},dependencies:[F,tt,Y,nt,it,ut,ge,le,ae],styles:[".filters-container[_ngcontent-%COMP%]{padding:1.5rem;max-width:1400px;margin:0 auto}[_nghost-%COMP%]     .p-dialog .p-dialog-header{padding:1.25rem 1.5rem;border-bottom:1px solid var(--surface-border)}[_nghost-%COMP%]     .p-dialog .p-dialog-content{padding:1.5rem}"]})};export{_t as FiltersComponent};
